# R for travis: see documentation at https://docs.travis-ci.com/user/languages/r

os: linux
dist: trusty
sudo: required
services: docker

env:
  global:
    - DOCKER_CNTR="eddelbuettel/tiledb_r-base-plus"
      DOCKER_OPTS="--rm -ti -v $(pwd):/mnt -w /mnt"
      R_BLD_OPTS="--no-build-vignettes --no-manual"
      R_CHK_OPTS="--no-vignettes --no-manual"

before_install:
  - docker pull ${DOCKER_CNTR}
  - docker run ${DOCKER_OPTS} ${DOCKER_CNTR} r -p -e 'sessionInfo()'

install:
  - docker run ${DOCKER_OPTS} ${DOCKER_CNTR} R CMD build ${R_BLD_OPTS} .

script:
  - docker run ${DOCKER_OPTS} ${DOCKER_CNTR} R CMD check ${R_CHK_OPTS} tiledb_*.tar.gz

notifications:
  email:
    on_success: change
    on_failure: change

