<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TileDB API Documentation â€¢ tiledb</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="TileDB API Documentation">
<meta property="og:description" content="tiledb">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tiledb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/documentation.html">TileDB API Documentation</a>
    </li>
    <li>
      <a href="../articles/introduction.html">First Steps with TileDB</a>
    </li>
    <li>
      <a href="../articles/tiledb-mariadb-examples.html">TileDB and (R)MariaDB Examples</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/TileDB-Inc/TileDB-R/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="documentation_files/header-attrs-2.7/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>TileDB API Documentation</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/TileDB-Inc/TileDB-R/blob/master/vignettes/documentation.Rmd"><code>vignettes/documentation.Rmd</code></a></small>
      <div class="hidden name"><code>documentation.Rmd</code></div>

    </div>

    
    
<p>This document follows the <a href="https://docs.tiledb.com/main/solutions/tiledb-embedded/api-usage">TileDB API usage examples</a>. A shorter <a href="introduction.html">introductory vignette</a> is also available.</p>
<div id="prelimaries" class="section level1">
<h1 class="hasAnchor">
<a href="#prelimaries" class="anchor"></a>Prelimaries</h1>
<p>We will show two initial and basic examples for a dense and sparse array simply to create array data on disk to refer to later in examples that follow.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TileDB-Inc/TileDB-R">tiledb</a></span><span class="op">)</span>

<span class="va">tdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">uridense</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">tdir</span>, <span class="st">"dense"</span><span class="op">)</span>
<span class="va">uridensefix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">tdir</span>, <span class="st">"densefix"</span><span class="op">)</span>
<span class="va">uridensevar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">tdir</span>, <span class="st">"densevar"</span><span class="op">)</span>
<span class="va">uridensewkey</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">tdir</span>, <span class="st">"denseenc"</span><span class="op">)</span>

<span class="va">create_array</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">array_name</span><span class="op">)</span> <span class="op">{</span>
    <span class="co"># Check if the array already exists.</span>
    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="../reference/tiledb_object_type.html">tiledb_object_type</a></span><span class="op">(</span><span class="va">array_name</span><span class="op">)</span> <span class="op">==</span> <span class="st">"ARRAY"</span><span class="op">)</span> <span class="op">{</span>
        <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="st">"Array already exists."</span><span class="op">)</span>
        <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span><span class="op">)</span>
    <span class="op">}</span>

    <span class="co"># The array will be 4x4 with dimensions "rows" and "cols", with domain [1,4].</span>
    <span class="va">dom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain.html">tiledb_domain</a></span><span class="op">(</span>dims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"rows"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">4L</span>, <span class="st">"INT32"</span><span class="op">)</span>,
                                  <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"cols"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">4L</span>, <span class="st">"INT32"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

    <span class="co"># The array will be dense with a single attribute "a" so each (i,j) cell can store an integer.</span>
    <span class="va">schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, attrs <span class="op">=</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"a"</span>, type <span class="op">=</span> <span class="st">"INT32"</span><span class="op">)</span><span class="op">)</span>

    <span class="co"># Create the (empty) array on disk, and return the path invisibly</span>
    <span class="fu"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span><span class="op">(</span><span class="fu"><a href="../reference/tiledb_array_create.html">tiledb_array_create</a></span><span class="op">(</span><span class="va">array_name</span>, <span class="va">schema</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">write_array</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">array_name</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html">array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">5L</span>, <span class="fl">9L</span>, <span class="fl">13L</span><span class="op">)</span>,
                    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2L</span>, <span class="fl">6L</span>, <span class="fl">10L</span>, <span class="fl">14L</span><span class="op">)</span>,
                    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3L</span>, <span class="fl">7L</span>, <span class="fl">11L</span>, <span class="fl">15L</span><span class="op">)</span>,
                    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4L</span>, <span class="fl">8L</span>, <span class="fl">12L</span>, <span class="fl">16L</span><span class="op">)</span><span class="op">)</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">4</span><span class="op">)</span><span class="op">)</span>
    <span class="co"># Open the array and write to it.</span>
    <span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span>uri <span class="op">=</span> <span class="va">array_name</span><span class="op">)</span>
    <span class="va">A</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">data</span>
<span class="op">}</span>

<span class="fu">create_array</span><span class="op">(</span><span class="va">uridense</span><span class="op">)</span>
<span class="fu">write_array</span><span class="op">(</span><span class="va">uridense</span><span class="op">)</span>


<span class="va">urisparse</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">tdir</span>, <span class="st">"sparse"</span><span class="op">)</span>

<span class="va">create_array</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">array_name</span><span class="op">)</span> <span class="op">{</span>
    <span class="co"># Check if the array already exists.</span>
    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="../reference/tiledb_object_type.html">tiledb_object_type</a></span><span class="op">(</span><span class="va">array_name</span><span class="op">)</span> <span class="op">==</span> <span class="st">"ARRAY"</span><span class="op">)</span> <span class="op">{</span>
        <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="st">"Array already exists."</span><span class="op">)</span>
        <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span><span class="op">)</span>
    <span class="op">}</span>

    <span class="co"># The array will be 4x4 with dimensions "rows" and "cols", with domain [1,4].</span>
    <span class="va">dom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain.html">tiledb_domain</a></span><span class="op">(</span>dims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"rows"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">4L</span>, <span class="st">"INT32"</span><span class="op">)</span>,
                                  <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"cols"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">4L</span>, <span class="st">"INT32"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

    <span class="co"># The array will be dense with a single attribute "a" so each (i,j) cell can store an integer.</span>
    <span class="va">schema</span> <span class="op">=</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, attrs<span class="op">=</span><span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"a"</span>, type <span class="op">=</span> <span class="st">"INT32"</span><span class="op">)</span>, sparse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

    <span class="co"># Create the (empty) array on disk, and return the path invisibly.</span>
    <span class="fu"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span><span class="op">(</span><span class="fu"><a href="../reference/tiledb_array_create.html">tiledb_array_create</a></span><span class="op">(</span><span class="va">array_name</span>, <span class="va">schema</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">write_array</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">array_name</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">I</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>
    <span class="va">J</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">3</span><span class="op">)</span>
    <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">2L</span>, <span class="fl">3L</span><span class="op">)</span>
    <span class="co"># Open the array and write to it.</span>
    <span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span>uri <span class="op">=</span> <span class="va">array_name</span><span class="op">)</span>
    <span class="va">A</span><span class="op">[</span><span class="va">I</span>, <span class="va">J</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">data</span>
<span class="op">}</span>

<span class="fu">create_array</span><span class="op">(</span><span class="va">urisparse</span><span class="op">)</span>
<span class="fu">write_array</span><span class="op">(</span><span class="va">urisparse</span><span class="op">)</span>

<span class="va">close_and_reopen</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">arr</span>, <span class="va">txt</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_close</span><span class="op">(</span><span class="va">arr</span><span class="op">@</span><span class="va">ptr</span><span class="op">)</span>
  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_open_with_ptr</span><span class="op">(</span><span class="va">arr</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">txt</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
</div>
<div id="api-usage" class="section level1">
<h1 class="hasAnchor">
<a href="#api-usage" class="anchor"></a>API Usage</h1>
<div id="creating-arrays" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-arrays" class="anchor"></a>Creating Arrays</h2>
<div id="creating-dimensions" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-dimensions" class="anchor"></a>Creating Dimensions</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TileDB-Inc/TileDB-R">tiledb</a></span><span class="op">)</span>

<span class="co"># Create dimension</span>
<span class="va">dim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"dim1"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">2L</span>, <span class="st">"INT32"</span><span class="op">)</span>

<span class="co"># String dimenions: no values for domain and extent</span>
<span class="va">strdim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"dim2"</span>, <span class="cn">NULL</span>, <span class="cn">NULL</span>, <span class="st">"ASCII"</span><span class="op">)</span></code></pre></div>
</div>
<div id="creating-the-array-domain" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-the-array-domain" class="anchor"></a>Creating the Array Domain</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TileDB-Inc/TileDB-R">tiledb</a></span><span class="op">)</span>

<span class="co">#  .. create dimensions `dim1`, `dim2`</span>
<span class="va">dim1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"dim1"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">2L</span>, <span class="st">"INT32"</span><span class="op">)</span>
<span class="va">dim2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"dim2"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">2L</span><span class="op">)</span>, <span class="fl">2L</span>, <span class="st">"INT32"</span><span class="op">)</span>

<span class="co"># Create domain with two dimensions</span>
<span class="co"># In C++: domain.add_dimensions(dim1).add_dimension(dim2)</span>
<span class="va">dom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain.html">tiledb_domain</a></span><span class="op">(</span>dims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">dim1</span>, <span class="va">dim2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="creating-attributes" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-attributes" class="anchor"></a>Creating Attributes</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create attribute</span>
<span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"attr"</span>, type <span class="op">=</span> <span class="st">"INT32"</span><span class="op">)</span>

<span class="co"># Create attribute</span>
<span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"a1"</span>, type <span class="op">=</span> <span class="st">"INT32"</span><span class="op">)</span>

<span class="co"># Access cell value via generic or functions</span>
<span class="fu"><a href="../reference/cell_val_num.html">cell_val_num</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/cell_val_num.html">tiledb_attribute_get_cell_val_num</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## Attribute value counts can be set via a generic method and a direct method</span>
<span class="fu"><a href="../reference/cell_val_num.html">cell_val_num</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">3</span>
<span class="fu"><a href="../reference/cell_val_num&lt;-.html">tiledb_attribute_set_cell_val_num</a></span><span class="op">(</span><span class="va">attr</span>, <span class="fl">3</span><span class="op">)</span>

<span class="co">## set char attribute to variable length which is encoded as a NA</span>
<span class="fu"><a href="../reference/cell_val_num.html">cell_val_num</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NA</span>
<span class="fu"><a href="../reference/cell_val_num&lt;-.html">tiledb_attribute_set_cell_val_num</a></span><span class="op">(</span><span class="va">attr</span>, <span class="cn">NA</span><span class="op">)</span></code></pre></div>
<div id="setting-fill-values" class="section level4">
<h4 class="hasAnchor">
<a href="#setting-fill-values" class="anchor"></a>Setting Fill Values</h4>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ... create int attribute attr</span>
<span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"a1"</span>, type <span class="op">=</span> <span class="st">"INT32"</span><span class="op">)</span>
<span class="co"># set fill value to 42L</span>
<span class="fu"><a href="../reference/tiledb_attribute_set_fill_value.html">tiledb_attribute_set_fill_value</a></span><span class="op">(</span><span class="va">attr</span>, <span class="fl">42L</span><span class="op">)</span>

<span class="co"># ... create variable-sized attributte attr</span>
<span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"attr"</span>, type <span class="op">=</span> <span class="st">"CHAR"</span><span class="op">)</span>
<span class="fu"><a href="../reference/cell_val_num&lt;-.html">tiledb_attribute_set_cell_val_num</a></span><span class="op">(</span><span class="va">attr</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co"># set fill value to "..."</span>
<span class="fu"><a href="../reference/tiledb_attribute_set_fill_value.html">tiledb_attribute_set_fill_value</a></span><span class="op">(</span><span class="va">attr</span>, <span class="st">"..."</span><span class="op">)</span></code></pre></div>
</div>
<div id="setting-a-compressor" class="section level4">
<h4 class="hasAnchor">
<a href="#setting-a-compressor" class="anchor"></a>Setting a Compressor</h4>
<!-- #### ?? -->
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">comp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"GZIP"</span><span class="op">)</span>
<span class="fu"><a href="../reference/tiledb_filter_set_option.html">tiledb_filter_set_option</a></span><span class="op">(</span><span class="va">comp</span>,<span class="st">"COMPRESSION_LEVEL"</span>, <span class="fl">10</span><span class="op">)</span>

<span class="co"># Create a filter list with the compressor</span>
<span class="va">filter_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter_list.html">tiledb_filter_list</a></span><span class="op">(</span><span class="va">comp</span><span class="op">)</span>

<span class="co"># Create attribute with the filter list</span>
<span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"attr"</span>, <span class="st">"INT32"</span>, filter_list <span class="op">=</span> <span class="va">filter_list</span><span class="op">)</span></code></pre></div>
</div>
<div id="setting-other-filters" class="section level4">
<h4 class="hasAnchor">
<a href="#setting-other-filters" class="anchor"></a>Setting Other Filters</h4>
<!-- #### ?? -->
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create filters</span>
<span class="va">f1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"BIT_WIDTH_REDUCTION"</span><span class="op">)</span>
<span class="va">f2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"ZSTD"</span><span class="op">)</span>

<span class="co"># Create a filter list with the two filters</span>
<span class="va">filter_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter_list.html">tiledb_filter_list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">f1</span>,<span class="va">f2</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Create attribute with the filter list</span>
<span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"attr"</span>, <span class="st">"INT32"</span>, filter_list <span class="op">=</span> <span class="va">filter_list</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="creating-the-array-schema" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-the-array-schema" class="anchor"></a>Creating the Array Schema</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ... create domain dom</span>
<span class="va">attr1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"attr1"</span>, <span class="st">"INT32"</span>, filter_list <span class="op">=</span> <span class="va">filter_list</span><span class="op">)</span>
<span class="va">attr2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"attr2"</span>, <span class="st">"FLOAT64"</span>, filter_list <span class="op">=</span> <span class="va">filter_list</span><span class="op">)</span>

<span class="co"># Create a dense array</span>
<span class="va">schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">attr1</span>, <span class="va">attr2</span><span class="op">)</span>, sparse <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co"># Or, create a sparse array</span>
<span class="co"># schema &lt;- tiledb_array_schema(dom, c(attr1, attr2), sparse = TRUE)</span></code></pre></div>
<div id="setting-the-tile-and-cell-order" class="section level4">
<h4 class="hasAnchor">
<a href="#setting-the-tile-and-cell-order" class="anchor"></a>Setting the Tile and Cell Order</h4>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ... create domain dom</span>
<span class="co"># ... create attributes attr1, attr2</span>

<span class="co"># The tile and order can be "ROW_MAJOR" or "COL_MAJOR"</span>
<span class="va">schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">attr1</span>, <span class="va">attr2</span><span class="op">)</span>,
                              cell_order <span class="op">=</span> <span class="st">"COL_MAJOR"</span>,
                              tile_order <span class="op">=</span> <span class="st">"ROW_MAJOR"</span><span class="op">)</span></code></pre></div>
</div>
<div id="setting-the-data-tile-capacity" class="section level4">
<h4 class="hasAnchor">
<a href="#setting-the-data-tile-capacity" class="anchor"></a>Setting the Data Tile Capacity</h4>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># set capacity</span>
<span class="fu"><a href="../reference/capacity.html">capacity</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">100000</span>
<span class="fu"><a href="../reference/capacity&lt;-.html">tiledb_array_schema_set_capacity</a></span><span class="op">(</span><span class="va">schema</span>, <span class="fl">10000</span><span class="op">)</span>

<span class="co"># get capacity</span>
<span class="fu"><a href="../reference/capacity.html">capacity</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 10000</code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/capacity.html">tiledb_array_schema_get_capacity</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 10000</code></pre>
</div>
<div id="allowing-duplicates" class="section level4">
<h4 class="hasAnchor">
<a href="#allowing-duplicates" class="anchor"></a>Allowing Duplicates</h4>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">schema</a></span><span class="op">(</span><span class="va">urisparse</span><span class="op">)</span>

<span class="co"># get 'duplicates allowed?' status</span>
<span class="fu"><a href="../reference/allows_dups.html">allows_dups</a></span><span class="op">(</span><span class="va">sch</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/allows_dups.html">tiledb_array_schema_get_allows_dups</a></span><span class="op">(</span><span class="va">sch</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># set 'duplicates allowed?' status</span>
<span class="fu"><a href="../reference/allows_dups.html">allows_dups</a></span><span class="op">(</span><span class="va">sch</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span>
<span class="fu"><a href="../reference/allows_dups&lt;-.html">tiledb_array_schema_set_allows_dups</a></span><span class="op">(</span><span class="va">sch</span>, <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## &lt;pointer: 0x55970da46b20&gt;</code></pre>
</div>
<div id="checking-correctness" class="section level4">
<h4 class="hasAnchor">
<a href="#checking-correctness" class="anchor"></a>Checking Correctness</h4>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/check.html">check</a></span><span class="op">(</span><span class="va">sch</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/check.html">tiledb_array_schema_check</a></span><span class="op">(</span><span class="va">sch</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
</div>
<div id="setting-filters" class="section level3">
<h3 class="hasAnchor">
<a href="#setting-filters" class="anchor"></a>Setting Filters</h3>
<div id="creating-a-filter-list" class="section level4">
<h4 class="hasAnchor">
<a href="#creating-a-filter-list" class="anchor"></a>Creating a Filter List</h4>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a "GZIP" compression filter</span>
<span class="va">flt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"GZIP"</span><span class="op">)</span>
<span class="co"># set the option 'COMPRESSION_LEVEL' to 10</span>
<span class="fu"><a href="../reference/tiledb_filter_set_option.html">tiledb_filter_set_option</a></span><span class="op">(</span><span class="va">flt</span>, <span class="st">"COMPRESSION_LEVEL"</span>, <span class="fl">10</span><span class="op">)</span>

<span class="co"># create a filter list with this filter</span>
<span class="va">fltlst</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter_list.html">tiledb_filter_list</a></span><span class="op">(</span><span class="va">flt</span><span class="op">)</span></code></pre></div>
</div>
<div id="other-filters" class="section level4">
<h4 class="hasAnchor">
<a href="#other-filters" class="anchor"></a>Other Filters</h4>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a filter list object with both</span>
<span class="va">fltlst</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter_list.html">tiledb_filter_list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">flt1</span>, <span class="va">flt2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="setting-the-tile-chunk-size" class="section level4">
<h4 class="hasAnchor">
<a href="#setting-the-tile-chunk-size" class="anchor"></a>Setting the Tile Chunk Size</h4>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ... create filter list</span>
<span class="fu"><a href="../reference/set_max_chunk_size.html">set_max_chunk_size</a></span><span class="op">(</span><span class="va">filter_list</span>, <span class="fl">10000</span><span class="op">)</span>
<span class="fu"><a href="../reference/set_max_chunk_size.html">tiledb_filter_list_set_max_chunk_size</a></span><span class="op">(</span><span class="va">filter_list</span>, <span class="fl">10000</span><span class="op">)</span>

<span class="fu"><a href="../reference/max_chunk_size.html">max_chunk_size</a></span><span class="op">(</span><span class="va">filter_list</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 10000</code></pre>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/max_chunk_size.html">tiledb_filter_list_get_max_chunk_size</a></span><span class="op">(</span><span class="va">filter_list</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 10000</code></pre>
</div>
<div id="setting-a-filter-list-for-an-attribute" class="section level4">
<h4 class="hasAnchor">
<a href="#setting-a-filter-list-for-an-attribute" class="anchor"></a>Setting a Filter List for an Attribute</h4>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create (or access) an attribute</span>
<span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"INT32"</span><span class="op">)</span>

<span class="co"># create a filter list</span>
<span class="va">flt1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"BIT_WIDTH_REDUCTION"</span><span class="op">)</span>
<span class="va">flt2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"ZSTD"</span><span class="op">)</span>
<span class="va">fltlst</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter_list.html">tiledb_filter_list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">flt1</span>, <span class="va">flt2</span><span class="op">)</span><span class="op">)</span>

<span class="co"># set the filter list</span>
<span class="fu"><a href="../reference/domain.html">filter_list</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">fltlst</span></code></pre></div>
</div>
<div id="setting-a-filter-list-for-a-dimension" class="section level4">
<h4 class="hasAnchor">
<a href="#setting-a-filter-list-for-a-dimension" class="anchor"></a>Setting a Filter List for a Dimension</h4>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"d"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">10L</span><span class="op">)</span>, <span class="fl">1L</span>, <span class="st">"INT32"</span><span class="op">)</span>

<span class="co"># create a filter list</span>
<span class="va">flt1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"BIT_WIDTH_REDUCTION"</span><span class="op">)</span>
<span class="va">flt2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"ZSTD"</span><span class="op">)</span>
<span class="va">fltlst</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter_list.html">tiledb_filter_list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">flt1</span>, <span class="va">flt2</span><span class="op">)</span><span class="op">)</span>

<span class="co"># assign the filter list</span>
<span class="fu"><a href="../reference/domain.html">filter_list</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">fltlst</span></code></pre></div>
</div>
<div id="setting-a-filter-list-for-all-dimensions" class="section level4">
<h4 class="hasAnchor">
<a href="#setting-a-filter-list-for-all-dimensions" class="anchor"></a>Setting a Filter List for All Dimensions</h4>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ... create (or retrieve) array schema sch</span>
<span class="co"># ... create filter list fl</span>

<span class="co"># assign filter list to schema</span>
<span class="fu"><a href="../reference/tiledb_array_schema_set_coords_filter_list.html">tiledb_array_schema_set_coords_filter_list</a></span><span class="op">(</span><span class="va">sch</span>, <span class="va">fl</span><span class="op">)</span>

<span class="co"># Alternatively create the schema and set the coordinates filter list</span>
<span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">attr1</span>, <span class="va">attr2</span><span class="op">)</span>, coords_filter_list <span class="op">=</span> <span class="va">fl</span><span class="op">)</span></code></pre></div>
</div>
<div id="setting-a-filter-list-for-variable-sized-value-offsets" class="section level4">
<h4 class="hasAnchor">
<a href="#setting-a-filter-list-for-variable-sized-value-offsets" class="anchor"></a>Setting a Filter List for Variable-Sized Value Offsets</h4>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ... create (or retrieve) array schema sch</span>
<span class="co"># ... create filter list fl</span>

<span class="co"># assign filter list to schema</span>
<span class="fu"><a href="../reference/tiledb_array_schema_set_offsets_filter_list.html">tiledb_array_schema_set_offsets_filter_list</a></span><span class="op">(</span><span class="va">sch</span>, <span class="va">fl</span><span class="op">)</span>

<span class="co"># Create the schema setting the offsets filter list</span>
<span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">attr1</span>, <span class="va">attr2</span><span class="op">)</span>, offsets_filter_list <span class="op">=</span> <span class="va">fl</span><span class="op">)</span></code></pre></div>
</div>
<div id="setting-coordinate-and-offset-filters" class="section level4">
<h4 class="hasAnchor">
<a href="#setting-coordinate-and-offset-filters" class="anchor"></a>Setting Coordinate and Offset Filters</h4>
<!-- #### ?? -->
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ... create domain dom</span>
<span class="co"># ... create attributes attr1, attr2</span>
<span class="co"># ... create filter lists fl1, fl2, similar to attributes</span>
<span class="va">f1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"BIT_WIDTH_REDUCTION"</span><span class="op">)</span>
<span class="va">f2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"ZSTD"</span><span class="op">)</span>
<span class="va">fl1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter_list.html">tiledb_filter_list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">f1</span><span class="op">)</span><span class="op">)</span>
<span class="va">fl2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter_list.html">tiledb_filter_list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">f2</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Create the schema setting the coordinates and offsets filter lists</span>
<span class="va">schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">attr1</span>, <span class="va">attr2</span><span class="op">)</span>,
                              coords_filter_list <span class="op">=</span> <span class="va">fl1</span>,
                              offsets_filter_list <span class="op">=</span> <span class="va">fl2</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="creating-the-array" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-the-array" class="anchor"></a>Creating the Array</h3>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ... create array schema</span>

<span class="co"># Create the array</span>
<span class="fu"><a href="../reference/tiledb_array_create.html">tiledb_array_create</a></span><span class="op">(</span><span class="va">uridense</span>, <span class="va">schema</span><span class="op">)</span></code></pre></div>
</div>
<div id="creating-encrypted-arrays" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-encrypted-arrays" class="anchor"></a>Creating Encrypted Arrays</h3>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># assume previously created schema 'sch'</span>
<span class="co"># use encryption key</span>
<span class="va">encryption_key</span> <span class="op">&lt;-</span> <span class="st">"0123456789abcdeF0123456789abcdeF"</span>

<span class="co"># create encrypted array at 'uri' with schema 'sch'</span>
<span class="fu"><a href="../reference/tiledb_array_create.html">tiledb_array_create</a></span><span class="op">(</span><span class="va">uridensewkey</span>, <span class="va">sch</span>, <span class="va">encryption_key</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "/tmp/RtmpgWTlya/denseenc"</code></pre>
</div>
</div>
<div id="writing-arrays" class="section level2">
<h2 class="hasAnchor">
<a href="#writing-arrays" class="anchor"></a>Writing Arrays</h2>
<div id="writing-in-dense-subarrays" class="section level3">
<h3 class="hasAnchor">
<a href="#writing-in-dense-subarrays" class="anchor"></a>Writing in Dense Subarrays</h3>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## prepare a larger 5 x 5 to embed into</span>
<span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">d1</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"d1"</span>, domain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">5L</span><span class="op">)</span><span class="op">)</span>
<span class="va">d2</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"d2"</span>, domain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">5L</span><span class="op">)</span><span class="op">)</span>
<span class="va">dom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain.html">tiledb_domain</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">d1</span>, <span class="va">d2</span><span class="op">)</span><span class="op">)</span>
<span class="va">val</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"val"</span>, type <span class="op">=</span> <span class="st">"INT32"</span><span class="op">)</span>
<span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">val</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/tiledb_array_create.html">tiledb_array_create</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="va">sch</span><span class="op">)</span>

<span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">25</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span>, <span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span>
<span class="va">arr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dense.html">tiledb_dense</a></span><span class="op">(</span><span class="va">tmp</span>, as.data.frame<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>
<span class="va">arr</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">dat</span>


<span class="co"># Prepare a 2x3 dense array</span>
<span class="co"># Contrary to Python, R by default stores arrays in col-major order</span>
<span class="va">data</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/array.html">array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span>, <span class="fl">2L</span>, <span class="fl">5L</span>, <span class="fl">3L</span>, <span class="fl">6L</span><span class="op">)</span>, dim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Prepare the [1,2] x [2,4] subarray to write to</span>
<span class="va">I</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span>
<span class="va">J</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>

<span class="co"># Open the array and write the data to it</span>
<span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dense.html">tiledb_dense</a></span><span class="op">(</span>uri <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span>
<span class="va">A</span><span class="op">[</span><span class="va">I</span>, <span class="va">J</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">data</span>

<span class="fu"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span><span class="op">(</span><span class="va">tmp</span>, recursive<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<div id="basic-writing-using-low-level-code" class="section level4">
<h4 class="hasAnchor">
<a href="#basic-writing-using-low-level-code" class="anchor"></a>Basic Writing using Low-Level Code</h4>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_ctx.html">tiledb_ctx</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">arrptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_open</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">uridense</span>, <span class="st">"WRITE"</span><span class="op">)</span>

<span class="co">## data: simple (integer sequence) of 1:16 times 10</span>
<span class="va">vec</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">16</span> <span class="op">*</span> <span class="fl">10L</span>
<span class="va">subarr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">4L</span>, <span class="fl">1L</span>,<span class="fl">4L</span><span class="op">)</span>

<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">arrptr</span>, <span class="st">"WRITE"</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_subarray</span><span class="op">(</span><span class="va">qryptr</span>, <span class="va">subarr</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_layout</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"ROW_MAJOR"</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_buffer</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"a"</span>, <span class="va">vec</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_submit</span><span class="op">(</span><span class="va">qryptr</span><span class="op">)</span>
<span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_close</span><span class="op">(</span><span class="va">arrptr</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="writing-sparse-cells" class="section level3">
<h3 class="hasAnchor">
<a href="#writing-sparse-cells" class="anchor"></a>Writing Sparse Cells</h3>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="va">urisparse</span>
<span class="fu"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span><span class="op">(</span><span class="va">tmp</span>, recursive<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>

<span class="va">d1</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"d1"</span>, domain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">5L</span><span class="op">)</span><span class="op">)</span>
<span class="va">d2</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"d2"</span>, domain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">5L</span><span class="op">)</span><span class="op">)</span>
<span class="va">dom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain.html">tiledb_domain</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">d1</span>, <span class="va">d2</span><span class="op">)</span><span class="op">)</span>
<span class="va">val</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"val"</span>, type <span class="op">=</span> <span class="st">"INT32"</span><span class="op">)</span>
<span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, <span class="va">val</span>, sparse<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="../reference/tiledb_array_create.html">tiledb_array_create</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="va">sch</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "/tmp/RtmpgWTlya/sparse"</code></pre>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Prepare some data</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3L</span>, <span class="fl">4L</span>, <span class="fl">1L</span>, <span class="fl">2L</span><span class="op">)</span>

<span class="va">I</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>
<span class="va">J</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span>

<span class="co"># Open the array and write the data to it</span>
<span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span>uri <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span>
<span class="va">A</span><span class="op">[</span><span class="va">I</span>, <span class="va">J</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">data</span></code></pre></div>
</div>
<div id="writing-encrypted-arrays" class="section level3">
<h3 class="hasAnchor">
<a href="#writing-encrypted-arrays" class="anchor"></a>Writing Encrypted Arrays</h3>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># open for writing with corresponding encryption key</span>
<span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span><span class="va">uridensewkey</span>, encryption_key <span class="op">=</span> <span class="va">encryption_key</span><span class="op">)</span>
<span class="co"># access array as usual</span></code></pre></div>
</div>
<div id="fixed-length-attributes" class="section level3">
<h3 class="hasAnchor">
<a href="#fixed-length-attributes" class="anchor"></a>Fixed-length Attributes</h3>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.exists</a></span><span class="op">(</span><span class="va">uridensefix</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span><span class="op">(</span><span class="va">uridensefix</span>, recursive<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>
<span class="va">d1</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"d1"</span>, domain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span><span class="op">)</span>
<span class="va">d2</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"d2"</span>, domain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span><span class="op">)</span>
<span class="va">dom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain.html">tiledb_domain</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">d1</span>, <span class="va">d2</span><span class="op">)</span><span class="op">)</span>

<span class="va">vec</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">32</span> <span class="op">*</span> <span class="fl">10L</span>
<span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"a"</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/r_to_tiledb_type.html">r_to_tiledb_type</a></span><span class="op">(</span><span class="va">vec</span><span class="op">)</span><span class="op">)</span>

<span class="co">## set to two values per cell</span>
<span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_attribute_set_cell_val_num</span><span class="op">(</span><span class="va">attr</span><span class="op">@</span><span class="va">ptr</span>, <span class="fl">2</span><span class="op">)</span>
<span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, <span class="va">attr</span><span class="op">)</span>
<span class="fu"><a href="../reference/tiledb_array_create.html">tiledb_array_create</a></span><span class="op">(</span><span class="va">uridensefix</span>, <span class="va">sch</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "/tmp/RtmpgWTlya/densefix"</code></pre>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_ctx.html">tiledb_ctx</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">arrptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_open</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">uridensefix</span>, <span class="st">"WRITE"</span><span class="op">)</span>
<span class="va">subarr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">4L</span>, <span class="fl">1L</span>,<span class="fl">4L</span><span class="op">)</span>

<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">arrptr</span>, <span class="st">"WRITE"</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_subarray</span><span class="op">(</span><span class="va">qryptr</span>, <span class="va">subarr</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_layout</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"ROW_MAJOR"</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_buffer</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"a"</span>, <span class="va">vec</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_submit</span><span class="op">(</span><span class="va">qryptr</span><span class="op">)</span>
<span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_close</span><span class="op">(</span><span class="va">arrptr</span><span class="op">)</span>

<span class="co">#TODO Higher-level R support</span></code></pre></div>
</div>
<div id="var-length-attributes" class="section level3">
<h3 class="hasAnchor">
<a href="#var-length-attributes" class="anchor"></a>Var-length Attributes</h3>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.exists</a></span><span class="op">(</span><span class="va">uridensevar</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span><span class="op">(</span><span class="va">uridensevar</span>, recursive<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>
<span class="co">## Define array</span>
<span class="co">## The array will be 4x4 with dimensions "rows" and "cols", with domain [1,4].</span>
<span class="va">dom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain.html">tiledb_domain</a></span><span class="op">(</span>dims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"rows"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">4L</span>, <span class="st">"INT32"</span><span class="op">)</span>,
                              <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"cols"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">4L</span>, <span class="st">"INT32"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>


<span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"a1"</span>, type <span class="op">=</span> <span class="st">"CHAR"</span><span class="op">)</span>
<span class="co">## set to variable length</span>
<span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_attribute_set_cell_val_num</span><span class="op">(</span><span class="va">attr</span><span class="op">@</span><span class="va">ptr</span>, <span class="cn">NA</span><span class="op">)</span>

<span class="co">## now set the schema</span>
<span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_ctx.html">tiledb_ctx</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">schptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_schema_create</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="st">"DENSE"</span><span class="op">)</span>
<span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_schema_set_domain</span><span class="op">(</span><span class="va">schptr</span>, <span class="va">dom</span><span class="op">@</span><span class="va">ptr</span><span class="op">)</span>
<span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_schema_set_cell_order</span><span class="op">(</span><span class="va">schptr</span>, <span class="st">"ROW_MAJOR"</span><span class="op">)</span>
<span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_schema_set_tile_order</span><span class="op">(</span><span class="va">schptr</span>, <span class="st">"ROW_MAJOR"</span><span class="op">)</span>
<span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_schema_add_attribute</span><span class="op">(</span><span class="va">schptr</span>, <span class="va">attr</span><span class="op">@</span><span class="va">ptr</span><span class="op">)</span>



<span class="co">## Create the (empty) array on disk.</span>
<span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_create</span><span class="op">(</span><span class="va">uridensevar</span>, <span class="va">schptr</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "/tmp/RtmpgWTlya/densevar"</code></pre>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data</span> <span class="op">&lt;-</span> <span class="st">"abbcccddeeefghhhijjjkklmnoop"</span>;
<span class="va">offsets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0L</span>, <span class="fl">1L</span>, <span class="fl">3L</span>, <span class="fl">6L</span>, <span class="fl">8L</span>, <span class="fl">11L</span>, <span class="fl">12L</span>, <span class="fl">13L</span>, <span class="fl">16L</span>, <span class="fl">17L</span>, <span class="fl">20L</span>, <span class="fl">22L</span>, <span class="fl">23L</span>, <span class="fl">24L</span>, <span class="fl">25L</span>, <span class="fl">27L</span><span class="op">)</span>

<span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_ctx.html">tiledb_ctx</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">arrptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_open</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">uridensevar</span>, <span class="st">"WRITE"</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">arrptr</span>, <span class="st">"WRITE"</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_layout</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"ROW_MAJOR"</span><span class="op">)</span>

<span class="va">bufptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_buffer_var_char_create</span><span class="op">(</span><span class="va">offsets</span>, <span class="va">data</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_buffer_var_char</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"a1"</span>, <span class="va">bufptr</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_submit</span><span class="op">(</span><span class="va">qryptr</span><span class="op">)</span>
<span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_close</span><span class="op">(</span><span class="va">arrptr</span><span class="op">)</span></code></pre></div>
<pre><code>## &lt;pointer: 0x5597103207c0&gt;</code></pre>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#TODO Higher-level R support</span></code></pre></div>
</div>
<div id="writing-at-a-timestamp" class="section level3">
<h3 class="hasAnchor">
<a href="#writing-at-a-timestamp" class="anchor"></a>Writing at a Timestamp</h3>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 'at' uses Sys.time() from R in seconds, and shifts back 10 minutes</span>
<span class="va">at</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">10</span><span class="op">*</span><span class="fl">60</span>

<span class="co"># 'arr' is an already created array, could also be encrypted and carry key</span>
<span class="va">arr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_open_at.html">tiledb_array_open_at</a></span><span class="op">(</span><span class="va">arr</span>, <span class="st">"WRITE"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">600</span><span class="op">)</span>

<span class="co"># arr is now open for writing, any suitable content can be written the usual way</span></code></pre></div>
</div>
<div id="getting-the-fragment-info" class="section level3">
<h3 class="hasAnchor">
<a href="#getting-the-fragment-info" class="anchor"></a>Getting the Fragment Info</h3>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># continuing from previous example on dense variable length array</span>
<span class="co"># (but this works of course with any array after a write is needed</span>

<span class="co"># Number of fragments</span>
<span class="va">numfrag</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_get_fragment_num.html">tiledb_query_get_fragment_num</a></span><span class="op">(</span><span class="va">qry</span><span class="op">)</span>

<span class="co"># URI of given fragment, with 0 &lt;= idx &lt; numfrag</span>
<span class="va">uri</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_get_fragment_uri.html">tiledb_query_get_fragment_uri</a></span><span class="op">(</span><span class="va">qry</span>, <span class="va">idx</span><span class="op">)</span>

<span class="co"># Timestamp range of given fragment, with 0 &lt;= idx &lt; numfrag</span>
<span class="va">tsrange</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_get_fragment_timestamp_range.html">tiledb_query_get_fragment_timestamp_range</a></span><span class="op">(</span><span class="va">qry</span>, <span class="va">idx</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="reading-arrays" class="section level2">
<h2 class="hasAnchor">
<a href="#reading-arrays" class="anchor"></a>Reading Arrays</h2>
<div id="reading-the-array-schema" class="section level3">
<h3 class="hasAnchor">
<a href="#reading-the-array-schema" class="anchor"></a>Reading the Array Schema</h3>
<div id="inspecting-the-array-schema" class="section level4">
<h4 class="hasAnchor">
<a href="#inspecting-the-array-schema" class="anchor"></a>Inspecting the array schema</h4>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get a schema directly from storage, uri holds a valid array URI</span>
<span class="va">uri</span> <span class="op">&lt;-</span> <span class="st">"&lt;array_uri&gt;"</span>
<span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">schema</a></span><span class="op">(</span><span class="va">uri</span><span class="op">)</span>

<span class="co"># get an encrypted scheme directory from storage, enc_key is the AES-256 key</span>
<span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">schema</a></span><span class="op">(</span><span class="va">uri</span>, <span class="va">enc_key</span><span class="op">)</span>

<span class="co"># get a schema from an already openened array</span>
<span class="co"># using a sparse array example, works the same for dense arrays</span>
<span class="va">array_name</span> <span class="op">&lt;-</span> <span class="va">urisparse</span>
<span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span>uri <span class="op">=</span> <span class="va">array_name</span>, is.sparse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">schema</a></span><span class="op">(</span><span class="va">A</span><span class="op">)</span>

<span class="co"># one can also open encrypted arrays with key for AES-256 encryption</span>
<span class="co"># and all other options (for sparse arrays, data.frame objects...)</span>
<span class="va">key</span> <span class="op">&lt;-</span> <span class="st">"0123456789abcdeF0123456789abcdeF"</span>
<span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span>uri <span class="op">=</span> <span class="va">array_name</span>, encryption_key <span class="op">=</span> <span class="va">key</span><span class="op">)</span>
<span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">schema</a></span><span class="op">(</span><span class="va">A</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get array schema, this shows the sparse accessor</span>
<span class="co"># and it is similar for tiledb_dense()</span>
<span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span>uri <span class="op">=</span> <span class="va">urisparse</span>, is.sparse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">schema</a></span><span class="op">(</span><span class="va">A</span><span class="op">)</span>

<span class="co"># Get array type</span>
<span class="va">sparse</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">is.sparse</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span>

<span class="co"># Get tile capacity</span>
<span class="va">t_capacity</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/capacity.html">capacity</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span>

<span class="co"># Get tile order</span>
<span class="va">t_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">tile_order</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span>

<span class="co"># Get cell order</span>
<span class="va">c_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">cell_order</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span>

<span class="co"># Get coordinates and offset filter list</span>
<span class="va">reslist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">filter_list</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span>

<span class="co"># Get the array domain</span>
<span class="va">dom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">domain</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span>

<span class="co"># Get all attributes as list</span>
<span class="va">attrs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">attrs</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span>

<span class="co"># Check if given attribute exists</span>
<span class="va">has_attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/has_attribute.html">has_attribute</a></span><span class="op">(</span><span class="va">schema</span>, <span class="st">"attr"</span><span class="op">)</span>

<span class="co"># Get attribute from name</span>
<span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">attrs</a></span><span class="op">(</span><span class="va">schema</span>, <span class="st">"attr"</span><span class="op">)</span>

<span class="co"># Dump the array schema in ASCII format in the selected output</span>
<span class="fu">show</span><span class="op">(</span><span class="va">schema</span><span class="op">)</span></code></pre></div>
</div>
<div id="inspecting-domain" class="section level4">
<h4 class="hasAnchor">
<a href="#inspecting-domain" class="anchor"></a>Inspecting Domain</h4>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ... get array schema</span>
<span class="co"># ... get domain from schema</span>

<span class="co"># Get the domain datatype (i.e., the datatype of all dimensions)</span>
<span class="va">type</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">datatype</a></span><span class="op">(</span><span class="va">dom</span><span class="op">)</span>

<span class="co"># Get number of dimensions</span>
<span class="va">dim_num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">dom</span><span class="op">)</span>

<span class="co"># Get all dimension</span>
<span class="va">dims</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">dimensions</a></span><span class="op">(</span><span class="va">dom</span><span class="op">)</span>

<span class="co"># Get dimension by index (0 &lt;= i &lt; dim_num)</span>
<span class="va">dim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain_get_dimension_from_index.html">tiledb_domain_get_dimension_from_index</a></span><span class="op">(</span><span class="va">dom</span>, <span class="fl">1</span><span class="op">)</span>

<span class="co"># Get dimension by name</span>
<span class="va">dim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain_get_dimension_from_name.html">tiledb_domain_get_dimension_from_name</a></span><span class="op">(</span><span class="va">dom</span>, <span class="st">"dimname"</span><span class="op">)</span>

<span class="co"># Check dimension for name</span>
<span class="fu"><a href="../reference/tiledb_domain_has_dimension.html">tiledb_domain_has_dimension</a></span><span class="op">(</span><span class="va">dom</span>, <span class="st">"dimname"</span><span class="op">)</span>

<span class="co"># Dump the domain in ASCII format in the selected output</span>
<span class="fu">show</span><span class="op">(</span><span class="va">dom</span><span class="op">)</span></code></pre></div>
</div>
<div id="inspecting-dimensions" class="section level4">
<h4 class="hasAnchor">
<a href="#inspecting-dimensions" class="anchor"></a>Inspecting Dimensions</h4>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ... get array schema</span>
<span class="co"># ... get domain</span>
<span class="co"># ... get dimension by index or name</span>

<span class="co"># Get dimension name</span>
<span class="va">dim_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">name</a></span><span class="op">(</span><span class="va">dim</span><span class="op">)</span>

<span class="co"># Get dimension datatype</span>
<span class="va">dim_type</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">datatype</a></span><span class="op">(</span><span class="va">dim</span><span class="op">)</span>

<span class="co"># Get dimension domain</span>
<span class="va">domain</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">domain</a></span><span class="op">(</span><span class="va">dim</span><span class="op">)</span>

<span class="co"># Get tile extent</span>
<span class="va">tile_extent</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">tile</a></span><span class="op">(</span><span class="va">dim</span><span class="op">)</span>

<span class="co"># Dump the dimension in ASCII format in the selected output</span>
<span class="fu">show</span><span class="op">(</span><span class="va">dim</span><span class="op">)</span></code></pre></div>
</div>
<div id="inspecting-attributes" class="section level4">
<h4 class="hasAnchor">
<a href="#inspecting-attributes" class="anchor"></a>Inspecting Attributes</h4>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ... get array schema</span>
<span class="co"># ... get attribute by index or name</span>

<span class="co"># Get attribute name</span>
<span class="va">attr_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">name</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span>

<span class="co"># Get attribute datatype</span>
<span class="va">attr_type</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">datatype</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span>

<span class="co"># Get filter list</span>
<span class="va">filter_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">filter_list</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span>

<span class="co"># Check if attribute is variable-length</span>
<span class="va">is_var</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attribute_is_variable_sized.html">tiledb_attribute_is_variable_sized</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span>

<span class="co"># Get number of values per cell</span>
<span class="va">num</span> <span class="op">&lt;-</span> <span class="fu">ncells</span><span class="op">(</span><span class="va">attr</span><span class="op">)</span>

<span class="co"># Get cell size for this attribute</span>
<span class="va">sz</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attribute_get_cell_size.html">tiledb_attribute_get_cell_size</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span>

<span class="co"># Get the fill value (for both fixed and variable sized attributes)</span>
<span class="fu"><a href="../reference/tiledb_attribute_get_fill_value.html">tiledb_attribute_get_fill_value</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span>

<span class="co"># Dump the attribute in ASCII format in the selected output</span>
<span class="fu">show</span><span class="op">(</span><span class="va">attr</span><span class="op">)</span></code></pre></div>
</div>
<div id="inspecting-filters" class="section level4">
<h4 class="hasAnchor">
<a href="#inspecting-filters" class="anchor"></a>Inspecting Filters</h4>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># dim hold a previously created or load Dimension object</span>
<span class="va">fltrlst</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">filter_list</a></span><span class="op">(</span><span class="va">dim</span><span class="op">)</span>
<span class="co"># or fltrlst &lt;- filter_list(attr) for some attribute `attr`</span>

<span class="co"># get number of filter</span>
<span class="va">nb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/domain.html">nfilters</a></span><span class="op">(</span><span class="va">fltrlst</span><span class="op">)</span>

<span class="co"># get max chunk size</span>
<span class="va">mxsz</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/max_chunk_size.html">max_chunk_size</a></span><span class="op">(</span><span class="va">fltrlst</span><span class="op">)</span>

<span class="co"># get filter by index from filter list (0 &lt;= idx &lt; num_filters)</span>
<span class="va">idx</span> <span class="op">&lt;-</span> <span class="va">i</span>
<span class="va">fltr</span> <span class="op">&lt;-</span> <span class="va">fltrlst</span><span class="op">[</span><span class="va">idx</span><span class="op">]</span>

<span class="co"># get option (that is filter-dependent) from filter</span>
<span class="fu"><a href="../reference/tiledb_filter_get_option.html">tiledb_filter_get_option</a></span><span class="op">(</span><span class="va">fltr</span>, <span class="st">"COMPRESSION_LEVEL"</span><span class="op">)</span>

<span class="co"># set option (that is filter-dependent) for filter</span>
<span class="fu"><a href="../reference/tiledb_filter_set_option.html">tiledb_filter_set_option</a></span><span class="op">(</span><span class="va">fltr</span>, <span class="st">"COMPRESSION_LEVEL"</span>, <span class="fl">9</span><span class="op">)</span>

<span class="co"># get filter type</span>
<span class="fu"><a href="../reference/tiledb_filter_type.html">tiledb_filter_type</a></span><span class="op">(</span><span class="va">fltr</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="basic-reading" class="section level3">
<h3 class="hasAnchor">
<a href="#basic-reading" class="anchor"></a>Basic Reading</h3>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Open a dense array</span>
<span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span>uri <span class="op">=</span> <span class="va">uridense</span><span class="op">)</span>

<span class="co"># Or, open a sparse array</span>
<span class="co"># A &lt;- tiledb_sparse(uri = "&lt;array-uri&gt;", ctx=ctx)</span>

<span class="co"># Slice only rows 1, 2 and cols 2, 3, 4</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="va">A</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>
<span class="fu">show</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></code></pre></div>
<pre><code>## $rows
## [1] 1 1 1 2 2 2
## 
## $cols
## [1] 2 3 4 2 3 4
## 
## $a
## [1] 20 30 40 60 70 80</code></pre>
<div id="basic-reading-using-low-level-code" class="section level4">
<h4 class="hasAnchor">
<a href="#basic-reading-using-low-level-code" class="anchor"></a>Basic Reading using Low-Level Code</h4>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_ctx.html">tiledb_ctx</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">arrptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_open</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">uridense</span>, <span class="st">"READ"</span><span class="op">)</span>
<span class="co">## subarray of rows 1,2 and cols 2,3,4</span>
<span class="va">subarr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">2L</span>, <span class="fl">2L</span>,<span class="fl">4L</span><span class="op">)</span>

<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">arrptr</span>, <span class="st">"READ"</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_subarray</span><span class="op">(</span><span class="va">qryptr</span>, <span class="va">subarr</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_layout</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"ROW_MAJOR"</span><span class="op">)</span>
<span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">integer</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span>  <span class="co"># reserve space</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_buffer</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"a"</span>, <span class="va">v</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_submit</span><span class="op">(</span><span class="va">qryptr</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span>         <span class="co"># unformed array, no coordinates</span></code></pre></div>
<pre><code>## [1] 20 30 40 60 70 80</code></pre>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_close</span><span class="op">(</span><span class="va">arrptr</span><span class="op">)</span></code></pre></div>
</div>
<div id="variable-length-attributes" class="section level4">
<h4 class="hasAnchor">
<a href="#variable-length-attributes" class="anchor"></a>Variable-length Attributes</h4>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_ctx.html">tiledb_ctx</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">arrptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_open</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">uridensevar</span>, <span class="st">"READ"</span><span class="op">)</span>

<span class="va">subarr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">4L</span>, <span class="fl">1L</span>,<span class="fl">4L</span><span class="op">)</span>
<span class="va">bufptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_buffer_var_char_alloc</span><span class="op">(</span><span class="va">arrptr</span>, <span class="va">subarr</span>, <span class="st">"a1"</span>, <span class="fl">16</span>, <span class="fl">100</span><span class="op">)</span>

<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">arrptr</span>, <span class="st">"READ"</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_subarray</span><span class="op">(</span><span class="va">qryptr</span>, <span class="va">subarr</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_layout</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"ROW_MAJOR"</span><span class="op">)</span>

<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_buffer_var_char</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"a1"</span>, <span class="va">bufptr</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_submit</span><span class="op">(</span><span class="va">qryptr</span><span class="op">)</span>
<span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_close</span><span class="op">(</span><span class="va">arrptr</span><span class="op">)</span></code></pre></div>
<pre><code>## &lt;pointer: 0x5597101f8640&gt;</code></pre>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mat</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_get_buffer_var_char</span><span class="op">(</span><span class="va">bufptr</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">mat</span>, quote<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,] a    eee  i    m   
## [2,] bb   f    jjj  n   
## [3,] ccc  g    kk   oo  
## [4,] dd   hhh  l    p</code></pre>
</div>
<div id="getting-the-non-empty-domain" class="section level4">
<h4 class="hasAnchor">
<a href="#getting-the-non-empty-domain" class="anchor"></a>Getting the Non-empty Domain</h4>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># example with one fixed- and one variable-sized domain</span>
<span class="va">dom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain.html">tiledb_domain</a></span><span class="op">(</span>dims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"d1"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">4L</span>, <span class="st">"INT32"</span><span class="op">)</span>,
                              <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"d2"</span>, <span class="cn">NULL</span>, <span class="cn">NULL</span>, <span class="st">"ASCII"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="co"># ... add attribute(s), write content, ...</span>
<span class="co"># ... arr is the array opened</span>

<span class="co"># retrieve non-empty domain for fixed-sized dimension</span>
<span class="fu"><a href="../reference/tiledb_array_get_non_empty_domain_from_index.html">tiledb_array_get_non_empty_domain_from_index</a></span><span class="op">(</span><span class="va">arr</span>, <span class="fl">1</span><span class="op">)</span>
<span class="fu"><a href="../reference/tiledb_array_get_non_empty_domain_from_name.html">tiledb_array_get_non_empty_domain_from_name</a></span><span class="op">(</span><span class="va">arr</span>, <span class="st">"d1"</span><span class="op">)</span>
<span class="co"># retrieve non-empty domain for variable-sized dimension</span>
<span class="fu"><a href="../reference/tiledb_array_get_non_empty_domain_from_index.html">tiledb_array_get_non_empty_domain_from_index</a></span><span class="op">(</span><span class="va">arr</span>, <span class="fl">2</span><span class="op">)</span>
<span class="fu"><a href="../reference/tiledb_array_get_non_empty_domain_from_name.html">tiledb_array_get_non_empty_domain_from_name</a></span><span class="op">(</span><span class="va">arr</span>, <span class="st">"d2"</span><span class="op">)</span></code></pre></div>
</div>
<div id="reopening-arrays" class="section level4">
<h4 class="hasAnchor">
<a href="#reopening-arrays" class="anchor"></a>Reopening Arrays</h4>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Arrays are reopened automatically for you based on</span>
<span class="co"># read or write being performed. For direct pointer-based</span>
<span class="co"># access you can also explicitly reopen</span>
<span class="va">arr</span><span class="op">@</span><span class="va">ptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_reopen</span><span class="op">(</span><span class="va">arr</span><span class="op">@</span><span class="va">ptr</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="reading-encrypted-arrays" class="section level3">
<h3 class="hasAnchor">
<a href="#reading-encrypted-arrays" class="anchor"></a>Reading Encrypted Arrays</h3>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Open the array and read as a data.frame from it.</span>
<span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span>uri <span class="op">=</span> <span class="va">array_name</span>, as.data.frame<span class="op">=</span><span class="cn">TRUE</span>,
                  encryption_key <span class="op">=</span> <span class="va">encryption_key</span><span class="op">)</span>

<span class="co"># Slice rows 1 and 2, and cols 2, 3 and 4</span>
<span class="va">A</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>

<span class="co"># timestamps for TileDB are milliseconds since epoch, we use</span>
<span class="co"># R Datime object to pass the value</span>
<span class="va">tstamp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span><span class="op">(</span><span class="fl">1577955845.678</span>, origin<span class="op">=</span><span class="st">"1970-01-01"</span><span class="op">)</span>

<span class="co"># open the array for reading at the timestamp</span>
<span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_open_at.html">tiledb_array_open_at</a></span><span class="op">(</span><span class="va">A</span>, <span class="st">"READ"</span>, <span class="va">tstamp</span><span class="op">)</span></code></pre></div>
</div>
<div id="multi-range-subarrays" class="section level3">
<h3 class="hasAnchor">
<a href="#multi-range-subarrays" class="anchor"></a>Multi-range Subarrays</h3>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create query, allocate result buffer, ...</span>

<span class="co"># add two query range on the first dimension</span>
<span class="va">qry</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_add_range.html">tiledb_query_add_range</a></span><span class="op">(</span><span class="va">qry</span>, <span class="va">schema</span>, <span class="st">"d1"</span>, <span class="fl">2L</span>, <span class="fl">4L</span><span class="op">)</span>
<span class="va">qry</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_add_range.html">tiledb_query_add_range</a></span><span class="op">(</span><span class="va">qry</span>, <span class="va">schema</span>, <span class="st">"d1"</span>, <span class="fl">6L</span>, <span class="fl">8L</span><span class="op">)</span>

<span class="co"># add a query range on the second dimension, using variable size</span>
<span class="va">qry</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_add_range.html">tiledb_query_add_range</a></span><span class="op">(</span><span class="va">qry</span>, <span class="va">schema</span>, <span class="st">"d2"</span>, <span class="st">"caaa"</span>, <span class="st">"gzzz"</span><span class="op">)</span>


<span class="co"># number of ranges given index</span>
<span class="va">num</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_get_range_num.html">tiledb_query_get_range_num</a></span><span class="op">(</span><span class="va">qry</span>, <span class="va">idx</span><span class="op">)</span>

<span class="co"># range start, end and stride for range i (1 &lt;= i &lt;= num)</span>
<span class="va">rng</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_get_range.html">tiledb_query_get_range</a></span><span class="op">(</span><span class="va">qry</span>, <span class="va">idx</span>, <span class="va">i</span><span class="op">)</span>

<span class="co"># range start and end for variable-sized dimension for range i (1 &lt;= i &lt;= num)</span>
<span class="va">strrng</span> <span class="op">&lt;-</span> <span class="fu">tiledb_query_get_range_var</span><span class="op">(</span><span class="va">qry</span>, <span class="va">idx</span>, <span class="va">i</span><span class="op">)</span></code></pre></div>
</div>
<div id="incomplete-queries" class="section level3">
<h3 class="hasAnchor">
<a href="#incomplete-queries" class="anchor"></a>Incomplete Queries</h3>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_ctx.html">tiledb_ctx</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">arrptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_open</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">uridense</span>, <span class="st">"READ"</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">arrptr</span>, <span class="st">"READ"</span><span class="op">)</span>
<span class="va">subarr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">4L</span>, <span class="fl">1L</span>,<span class="fl">4L</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_subarray</span><span class="op">(</span><span class="va">qryptr</span>, <span class="va">subarr</span><span class="op">)</span>
<span class="va">vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">integer</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span>  <span class="co"># reserve (insufficient) space</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_buffer</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"a"</span>, <span class="va">vec</span><span class="op">)</span>
<span class="va">finished</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span>
<span class="kw">while</span> <span class="op">(</span><span class="op">!</span><span class="va">finished</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_submit</span><span class="op">(</span><span class="va">qryptr</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">vec</span><span class="op">)</span>
  <span class="va">finished</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_status</span><span class="op">(</span><span class="va">qryptr</span><span class="op">)</span> <span class="op">==</span> <span class="st">"COMPLETE"</span>
<span class="op">}</span></code></pre></div>
<pre><code>## [1] 10 20 30 40
## [1] 50 60 70 80
## [1]  90 100 110 120
## [1] 130 140 150 160</code></pre>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_close</span><span class="op">(</span><span class="va">arrptr</span><span class="op">)</span></code></pre></div>
</div>
<div id="result-estimation" class="section level3">
<h3 class="hasAnchor">
<a href="#result-estimation" class="anchor"></a>Result Estimation</h3>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ...create query object</span>

<span class="co"># estimated size of a fixed-length attribute in sparse array</span>
<span class="va">sz</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_get_est_result_size.html">tiledb_query_get_est_result_size</a></span><span class="op">(</span><span class="va">qry</span>, <span class="st">"a"</span><span class="op">)</span>

<span class="co"># estimated size of a variable-length attribute in dense or sparse array</span>
<span class="va">sz</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_get_est_result_size_var.html">tiledb_query_get_est_result_size_var</a></span><span class="op">(</span><span class="va">qry</span>, <span class="st">"b"</span><span class="op">)</span></code></pre></div>
</div>
<div id="time-traveling" class="section level3">
<h3 class="hasAnchor">
<a href="#time-traveling" class="anchor"></a>Time Traveling</h3>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># time traveling is currently only accessible via the lower-level API</span>
<span class="co"># we use the R Datetime type; internally TileDB uses milliseconds since epoch</span>
<span class="va">tstamp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">60</span><span class="op">*</span><span class="fl">60</span> <span class="co"># one hour ago</span>

<span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_ctx.html">tiledb_ctx</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">arrptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_open_at</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">uridense</span>, <span class="st">"READ"</span>, <span class="va">tstamp</span><span class="op">)</span>
<span class="va">subarr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">2L</span>, <span class="fl">2L</span>,<span class="fl">4L</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">arrptr</span>, <span class="st">"READ"</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_subarray</span><span class="op">(</span><span class="va">qryptr</span>, <span class="va">subarr</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_layout</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"ROW_MAJOR"</span><span class="op">)</span>
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">integer</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span>  <span class="co"># reserve space</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_buffer</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"a"</span>, <span class="va">a</span><span class="op">)</span>
<span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_submit</span><span class="op">(</span><span class="va">qryptr</span><span class="op">)</span>
<span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_close</span><span class="op">(</span><span class="va">arrptr</span><span class="op">)</span>
<span class="va">a</span></code></pre></div>
<pre><code>## [1] NA NA NA NA NA NA</code></pre>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># we can do the same with encrypted arrays</span>
<span class="va">encryption_key</span> <span class="op">&lt;-</span> <span class="st">"0123456789abcdeF0123456789abcdeF"</span>
<span class="va">arrptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_open_at_with_key</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">uridensewkey</span>, <span class="st">"READ"</span>,
                                                    <span class="va">encryption_key</span>, <span class="va">tstamp</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="embedded-sql" class="section level2">
<h2 class="hasAnchor">
<a href="#embedded-sql" class="anchor"></a>Embedded SQL</h2>
</div>
<div id="asynchronous-queries" class="section level2">
<h2 class="hasAnchor">
<a href="#asynchronous-queries" class="anchor"></a>Asynchronous Queries</h2>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#  ... create read or write query</span>

<span class="co"># Instead of using tiledb_query_submit(), use tiledb_query_submit_async()</span>
<span class="co"># There is an alternate form with a callback function which is not yet supported</span>
<span class="fu"><a href="../reference/tiledb_query_submit_async.html">tiledb_query_submit_async</a></span><span class="op">(</span><span class="va">qry</span><span class="op">)</span></code></pre></div>
</div>
<div id="configuration" class="section level2">
<h2 class="hasAnchor">
<a href="#configuration" class="anchor"></a>Configuration</h2>
<div id="basic-usage" class="section level4">
<h4 class="hasAnchor">
<a href="#basic-usage" class="anchor"></a>Basic Usage</h4>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create a configuration object</span>
<span class="va">config</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_config.html">tiledb_config</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># Set a configuration parameter</span>
<span class="va">config</span><span class="op">[</span><span class="st">"sm.tile_cache_size"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"5000"</span>

<span class="co"># Get a configuration parameter</span>
<span class="va">tile_cache_size</span> <span class="op">&lt;-</span> <span class="va">config</span><span class="op">[</span><span class="st">"sm.tile_cache_size"</span><span class="op">]</span>

<span class="co"># Unset a configuration parameter</span>
<span class="fu"><a href="../reference/tiledb_config_unset.html">tiledb_config_unset</a></span><span class="op">(</span><span class="va">config</span>, <span class="st">"sm.tile_cache_size"</span><span class="op">)</span></code></pre></div>
<pre><code>## &lt;pointer: 0x55970d533150&gt;</code></pre>
</div>
<div id="save-and-load-to-file" class="section level4">
<h4 class="hasAnchor">
<a href="#save-and-load-to-file" class="anchor"></a>Save and Load to File</h4>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Save to file</span>
<span class="va">config</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_config.html">tiledb_config</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">config</span><span class="op">[</span><span class="st">"sm.tile_cache_size"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span>;
<span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"tiledb_config"</span>, fileext <span class="op">=</span> <span class="st">".txt"</span><span class="op">)</span>
<span class="fu"><a href="../reference/tiledb_config_save.html">tiledb_config_save</a></span><span class="op">(</span><span class="va">config</span>, <span class="va">file</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "/tmp/RtmpgWTlya/tiledb_config57cd44d77600c.txt"</code></pre>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load from file</span>
<span class="va">config_loaded</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_config_load.html">tiledb_config_load</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span>
<span class="va">tile_cache_size</span> <span class="op">=</span> <span class="va">config_loaded</span><span class="op">[</span><span class="st">"sm.tile_cache_size"</span><span class="op">]</span></code></pre></div>
</div>
<div id="configuration-iterator" class="section level4">
<h4 class="hasAnchor">
<a href="#configuration-iterator" class="anchor"></a>Configuration Iterator</h4>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># R has no native iterator but one loop over the config elements</span>
<span class="co"># by retrieving the configuration as a vector</span>

<span class="va">cfg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html">as.vector</a></span><span class="op">(</span><span class="fu"><a href="../reference/tiledb_config.html">tiledb_config</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>

<span class="co"># print all non-empty config elements</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">n</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">cfg</span><span class="op">)</span><span class="op">)</span>
   <span class="kw">if</span> <span class="op">(</span><span class="va">cfg</span><span class="op">[</span><span class="va">n</span><span class="op">]</span> <span class="op">!=</span> <span class="st">""</span><span class="op">)</span>
      <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">n</span>, <span class="st">":"</span>, <span class="va">cfg</span><span class="op">[</span><span class="va">n</span><span class="op">]</span>, <span class="st">"\n"</span><span class="op">)</span></code></pre></div>
<pre><code>## config.env_var_prefix : TILEDB_ 
## config.logging_level : 0 
## rest.http_compressor : any 
## rest.retry_count : 3 
## rest.retry_delay_factor : 1.25 
## rest.retry_http_codes : 503 
## rest.retry_initial_delay_ms : 500 
## rest.server_address : https://api.tiledb.com 
## rest.server_serialization_format : CAPNP 
## sm.check_coord_dups : true 
## sm.check_coord_oob : true 
## sm.check_global_order : true 
## sm.compute_concurrency_level : 12 
## sm.consolidation.amplification : 1.0 
## sm.consolidation.buffer_size : 50000000 
## sm.consolidation.mode : fragments 
## sm.consolidation.step_max_frags : 4294967295 
## sm.consolidation.step_min_frags : 4294967295 
## sm.consolidation.step_size_ratio : 0.0 
## sm.consolidation.steps : 4294967295 
## sm.dedup_coords : false 
## sm.enable_signal_handlers : true 
## sm.io_concurrency_level : 12 
## sm.memory_budget : 5368709120 
## sm.memory_budget_var : 10737418240 
## sm.num_tbb_threads : -1 
## sm.skip_checksum_validation : false 
## sm.sub_partitioner_memory_budget : 0 
## sm.tile_cache_size : 10000000 
## sm.vacuum.mode : fragments 
## sm.var_offsets.bitsize : 64 
## sm.var_offsets.extra_element : false 
## sm.var_offsets.mode : bytes 
## vfs.azure.block_list_block_size : 5242880 
## vfs.azure.max_parallel_ops : 12 
## vfs.azure.use_block_list_upload : true 
## vfs.azure.use_https : true 
## vfs.file.enable_filelocks : true 
## vfs.file.max_parallel_ops : 12 
## vfs.file.posix_directory_permissions : 755 
## vfs.file.posix_file_permissions : 644 
## vfs.gcs.max_parallel_ops : 12 
## vfs.gcs.multi_part_size : 5242880 
## vfs.gcs.request_timeout_ms : 3000 
## vfs.gcs.use_multi_part_upload : true 
## vfs.min_batch_gap : 512000 
## vfs.min_batch_size : 20971520 
## vfs.min_parallel_size : 10485760 
## vfs.read_ahead_cache_size : 10485760 
## vfs.read_ahead_size : 102400 
## vfs.s3.connect_max_tries : 5 
## vfs.s3.connect_scale_factor : 25 
## vfs.s3.connect_timeout_ms : 10800 
## vfs.s3.logging_level : Off 
## vfs.s3.max_parallel_ops : 12 
## vfs.s3.multipart_part_size : 5242880 
## vfs.s3.proxy_port : 0 
## vfs.s3.proxy_scheme : http 
## vfs.s3.region : us-east-1 
## vfs.s3.request_timeout_ms : 3000 
## vfs.s3.requester_pays : false 
## vfs.s3.scheme : https 
## vfs.s3.use_multipart_upload : true 
## vfs.s3.use_virtual_addressing : true 
## vfs.s3.verify_ssl : true</code></pre>
</div>
</div>
<div id="array-metadata" class="section level2">
<h2 class="hasAnchor">
<a href="#array-metadata" class="anchor"></a>Array Metadata</h2>
<div id="writing-array-metadata" class="section level4">
<h4 class="hasAnchor">
<a href="#writing-array-metadata" class="anchor"></a>Writing Array Metadata</h4>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 'array' can be a URI, or an array opened for writing</span>
<span class="fu"><a href="../reference/tiledb_put_metadata.html">tiledb_put_metadata</a></span><span class="op">(</span><span class="va">array</span>, <span class="st">"aaa"</span>, <span class="fl">100L</span><span class="op">)</span>
<span class="fu"><a href="../reference/tiledb_put_metadata.html">tiledb_put_metadata</a></span><span class="op">(</span><span class="va">array</span>, <span class="st">"bb"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1.1</span>, <span class="fl">2.2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="reading-array-metadata" class="section level4">
<h4 class="hasAnchor">
<a href="#reading-array-metadata" class="anchor"></a>Reading Array Metadata</h4>
<p>One can read by key:</p>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 'array' can be a URI, or an array opened for reading</span>
<span class="fu"><a href="../reference/tiledb_get_metadata.html">tiledb_get_metadata</a></span><span class="op">(</span><span class="va">array</span>, <span class="st">"aaa"</span><span class="op">)</span></code></pre></div>
<p>Or one can retrieve all metadata at once:</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 'array' can be a URI, or an array opened for reading</span>
<span class="va">md</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_get_all_metadata.html">tiledb_get_all_metadata</a></span><span class="op">(</span><span class="va">array</span><span class="op">)</span>

<span class="co"># prints all keys and (formatted) values</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">md</span><span class="op">)</span></code></pre></div>
</div>
<div id="deleting-array-metadata" class="section level4">
<h4 class="hasAnchor">
<a href="#deleting-array-metadata" class="anchor"></a>Deleting Array Metadata</h4>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 'array' can be a URI, or an array opened for writing</span>
<span class="fu"><a href="../reference/tiledb_delete_metadata.html">tiledb_delete_metadata</a></span><span class="op">(</span><span class="va">array</span>, <span class="st">"aaa"</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="consolidating-and-vacuuming" class="section level2">
<h2 class="hasAnchor">
<a href="#consolidating-and-vacuuming" class="anchor"></a>Consolidating And Vacuuming</h2>
<div id="fragments" class="section level4">
<h4 class="hasAnchor">
<a href="#fragments" class="anchor"></a>Fragments</h4>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># An array URI</span>
<span class="va">uri</span> <span class="op">&lt;-</span> <span class="st">"&lt;array_uri&gt;"</span>

<span class="co"># Consolidate with default configuration</span>
<span class="fu"><a href="../reference/array_consolidate.html">array_consolidate</a></span><span class="op">(</span><span class="va">uri</span><span class="op">)</span>

<span class="co"># Alteratively, create and pass a configuration object</span>
<span class="va">cfg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_config.html">tiledb_config</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">cfg</span><span class="op">[</span><span class="st">"sm.consolidation.steps"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"3"</span>
<span class="va">cfg</span><span class="op">[</span><span class="st">"sm.consolidation.mode"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"fragments"</span>
<span class="fu"><a href="../reference/array_consolidate.html">array_consolidate</a></span><span class="op">(</span><span class="va">uri</span>, <span class="va">cfg</span><span class="op">)</span></code></pre></div>
</div>
<div id="vacuuming" class="section level4">
<h4 class="hasAnchor">
<a href="#vacuuming" class="anchor"></a>Vacuuming</h4>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># An array URI</span>
<span class="va">uri</span> <span class="op">&lt;-</span> <span class="st">"&lt;array_uri&gt;"</span>

<span class="co"># Vacuum with default configuration</span>
<span class="fu"><a href="../reference/array_vacuum.html">array_vacuum</a></span><span class="op">(</span><span class="va">uri</span><span class="op">)</span>

<span class="co"># Alteratively, create and pass a configuration object</span>
<span class="va">cfg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_config.html">tiledb_config</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">cfg</span><span class="op">[</span><span class="st">"sm.vacuum.mode"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"fragments"</span>
<span class="fu"><a href="../reference/array_vacuum.html">array_vacuum</a></span><span class="op">(</span><span class="va">uri</span>, <span class="va">cfg</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="object-management" class="section level2">
<h2 class="hasAnchor">
<a href="#object-management" class="anchor"></a>Object Management</h2>
<div id="creating-tiledb-groups" class="section level4">
<h4 class="hasAnchor">
<a href="#creating-tiledb-groups" class="anchor"></a>Creating TileDB Groups</h4>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/tiledb_group_create.html">tiledb_group_create</a></span><span class="op">(</span><span class="st">"/tmp/my_group"</span><span class="op">)</span></code></pre></div>
</div>
<div id="getting-the-object-type" class="section level4">
<h4 class="hasAnchor">
<a href="#getting-the-object-type" class="anchor"></a>Getting the Object Type</h4>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">type</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_object_type.html">tiledb_object_type</a></span><span class="op">(</span><span class="st">"&lt;path&gt;"</span><span class="op">)</span></code></pre></div>
</div>
<div id="list-the-object-hierarchy" class="section level4">
<h4 class="hasAnchor">
<a href="#list-the-object-hierarchy" class="anchor"></a>List the Object Hierarchy</h4>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># List arrays (defaults to default "PREORDER" traversal)</span>
<span class="fu"><a href="../reference/tiledb_object_ls.html">tiledb_object_ls</a></span><span class="op">(</span><span class="va">uri</span><span class="op">)</span>

<span class="co"># Walk arrays (with "POSTORDER" traversal) returning a data.frame</span>
<span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_object_walk.html">tiledb_object_walk</a></span><span class="op">(</span><span class="st">"&lt;uri&gt;"</span>, <span class="st">"POSTORDER"</span><span class="op">)</span>

<span class="co"># Show the content</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></code></pre></div>
</div>
<div id="move-remove-object" class="section level4">
<h4 class="hasAnchor">
<a href="#move-remove-object" class="anchor"></a>Move / Remove Object</h4>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/tiledb_object_mv.html">tiledb_object_mv</a></span><span class="op">(</span><span class="st">"/tmp/my_group"</span>, <span class="st">"/tmp/my_group_2"</span><span class="op">)</span>

<span class="fu">tiledb_object_remove</span><span class="op">(</span><span class="va">ctx</span>, <span class="st">"/tmp/my_group_2/dense_array"</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="virtual-filesystem" class="section level2">
<h2 class="hasAnchor">
<a href="#virtual-filesystem" class="anchor"></a>Virtual Filesystem</h2>
<div id="writing" class="section level4">
<h4 class="hasAnchor">
<a href="#writing" class="anchor"></a>Writing</h4>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># binary file to be written</span>
<span class="va">uri</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"tiledb_vfs"</span>, fileext <span class="op">=</span> <span class="st">".bin"</span><span class="op">)</span>
<span class="co"># open file</span>
<span class="va">fhbuf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_vfs_open.html">tiledb_vfs_open</a></span><span class="op">(</span><span class="va">uri</span>, <span class="st">"WRITE"</span><span class="op">)</span>

<span class="co"># create a binary payload from a serialized R object</span>
<span class="va">payload</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/serialize.html">serialize</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>dbl<span class="op">=</span><span class="fl">153</span>, string<span class="op">=</span><span class="st">"abcde"</span><span class="op">)</span>, <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span>
<span class="co"># write it and close file</span>
<span class="fu"><a href="../reference/tiledb_vfs_write.html">tiledb_vfs_write</a></span><span class="op">(</span><span class="va">fhbuf</span>, <span class="va">payload</span><span class="op">)</span>
<span class="fu"><a href="../reference/tiledb_vfs_close.html">tiledb_vfs_close</a></span><span class="op">(</span><span class="va">fhbuf</span><span class="op">)</span>

<span class="co"># write again overwriting previous write</span>
<span class="va">fhbuf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_vfs_open.html">tiledb_vfs_open</a></span><span class="op">(</span><span class="va">uri</span>, <span class="st">"WRITE"</span><span class="op">)</span>
<span class="va">payload</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/serialize.html">serialize</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>dbl<span class="op">=</span><span class="fl">153.1</span>, string<span class="op">=</span><span class="st">"abcdef"</span><span class="op">)</span>, <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/tiledb_vfs_write.html">tiledb_vfs_write</a></span><span class="op">(</span><span class="va">fhbuf</span>, <span class="va">payload</span><span class="op">)</span>
<span class="fu"><a href="../reference/tiledb_vfs_close.html">tiledb_vfs_close</a></span><span class="op">(</span><span class="va">fhbuf</span><span class="op">)</span>

<span class="co"># append to existing file</span>
<span class="va">fhbuf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_vfs_open.html">tiledb_vfs_open</a></span><span class="op">(</span><span class="va">uri</span>, <span class="st">"APPEND"</span><span class="op">)</span>
<span class="va">payload</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/serialize.html">serialize</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>string<span class="op">=</span><span class="st">"ghijkl"</span><span class="op">)</span>, <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/tiledb_vfs_write.html">tiledb_vfs_write</a></span><span class="op">(</span><span class="va">fhbuf</span>, <span class="va">payload</span><span class="op">)</span>
<span class="fu"><a href="../reference/tiledb_vfs_close.html">tiledb_vfs_close</a></span><span class="op">(</span><span class="va">fhbuf</span><span class="op">)</span></code></pre></div>
</div>
<div id="reading" class="section level4">
<h4 class="hasAnchor">
<a href="#reading" class="anchor"></a>Reading</h4>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># open a binary file for reading</span>
<span class="va">fhbuf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_vfs_open.html">tiledb_vfs_open</a></span><span class="op">(</span><span class="va">uri</span>, <span class="st">"READ"</span><span class="op">)</span>
<span class="va">vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_vfs_read.html">tiledb_vfs_read</a></span><span class="op">(</span><span class="va">fhbuf</span>, <span class="fu">as.integer64</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>, <span class="fu">as.integer64</span><span class="op">(</span><span class="fl">488</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/tiledb_vfs_close.html">tiledb_vfs_close</a></span><span class="op">(</span><span class="va">fhbuf</span><span class="op">)</span></code></pre></div>
</div>
<div id="managing" class="section level4">
<h4 class="hasAnchor">
<a href="#managing" class="anchor"></a>Managing</h4>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Creating a directory</span>
<span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="../reference/tiledb_vfs_is_dir.html">tiledb_vfs_is_dir</a></span><span class="op">(</span><span class="st">"dir_A"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="../reference/tiledb_vfs_create_dir.html">tiledb_vfs_create_dir</a></span><span class="op">(</span><span class="st">"dir_A"</span><span class="op">)</span>
    <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Created 'dir_A'\n"</span><span class="op">)</span>
<span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"'dir_A' already exists\n"</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Creating an (empty) file</span>
<span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="../reference/tiledb_vfs_is_file.html">tiledb_vfs_is_file</a></span><span class="op">(</span><span class="st">"dir_A/file_A"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="../reference/tiledb_vfs_touch.html">tiledb_vfs_touch</a></span><span class="op">(</span><span class="st">"dir_A/file_A"</span><span class="op">)</span>
    <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Created empty file 'dir_A/file_A'\n"</span><span class="op">)</span>
<span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"File 'dir_A/file_A' already existed\n"</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Getting the file size</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Size of file 'dir_A/file_A': "</span>,
    <span class="fu"><a href="../reference/tiledb_vfs_file_size.html">tiledb_vfs_file_size</a></span><span class="op">(</span><span class="st">"dir_A/file_A"</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span>

<span class="co"># Moving files (moving directories is similar)</span>
<span class="fu"><a href="../reference/tiledb_vfs_move_file.html">tiledb_vfs_move_file</a></span><span class="op">(</span><span class="st">"dir_A/file_A"</span>, <span class="st">"dir_A/file_B"</span><span class="op">)</span>

<span class="co"># Cleaning up</span>
<span class="fu"><a href="../reference/tiledb_vfs_remove_file.html">tiledb_vfs_remove_file</a></span><span class="op">(</span><span class="st">"dir_A/file_B"</span><span class="op">)</span>
<span class="fu"><a href="../reference/tiledb_vfs_remove_dir.html">tiledb_vfs_remove_dir</a></span><span class="op">(</span><span class="st">"dir_A"</span><span class="op">)</span></code></pre></div>
</div>
<div id="s3" class="section level4">
<h4 class="hasAnchor">
<a href="#s3" class="anchor"></a>S3</h4>
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/tiledb_vfs_create_bucket.html">tiledb_vfs_create_bucket</a></span><span class="op">(</span><span class="st">"s3://my_bucket"</span><span class="op">)</span>

<span class="fu"><a href="../reference/tiledb_vfs_remove_bucket.html">tiledb_vfs_remove_bucket</a></span><span class="op">(</span><span class="st">"s3://my_bucket"</span><span class="op">)</span></code></pre></div>
</div>
<div id="configuring-vfs" class="section level4">
<h4 class="hasAnchor">
<a href="#configuring-vfs" class="anchor"></a>Configuring VFS</h4>
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_get_context.html">tiledb_get_context</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">config</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_config.html">tiledb_config</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">config</span><span class="op">[</span><span class="st">"vfs.file.max_parallel_ops"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">16</span>

<span class="va">vfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_vfs.html">tiledb_vfs</a></span><span class="op">(</span><span class="va">config</span>, <span class="va">ctx</span><span class="op">)</span>

<span class="co"># Or create the Config first and pass to the Ctx constructor</span></code></pre></div>
</div>
</div>
<div id="using-performance-statistics" class="section level2">
<h2 class="hasAnchor">
<a href="#using-performance-statistics" class="anchor"></a>Using Performance Statistics</h2>
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Start collecting statistics</span>
<span class="fu"><a href="../reference/tiledb_stats_enable.html">tiledb_stats_enable</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># ... create some query here</span>

<span class="va">res</span> <span class="op">&lt;-</span> <span class="va">A</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>

<span class="co"># Stop collecting statistics</span>
<span class="fu"><a href="../reference/tiledb_stats_disable.html">tiledb_stats_disable</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># Show the statistics on the console</span>
<span class="fu"><a href="../reference/tiledb_stats_print.html">tiledb_stats_print</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># Save the statistics to a file</span>
<span class="fu"><a href="../reference/tiledb_stats_dump.html">tiledb_stats_dump</a></span><span class="op">(</span><span class="st">"my_file_name"</span><span class="op">)</span>

<span class="co"># You can also reset the stats as follows</span>
<span class="fu"><a href="../reference/tiledb_stats_reset.html">tiledb_stats_reset</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div id="catching-errors" class="section level2">
<h2 class="hasAnchor">
<a href="#catching-errors" class="anchor"></a>Catching Errors</h2>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">result</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/conditions.html">tryCatch</a></span><span class="op">(</span><span class="op">{</span>
    <span class="co"># Create a group. The code below creates a group `my_group` and prints a</span>
    <span class="co"># message because (normally) it will succeed.</span>
    <span class="fu"><a href="../reference/tiledb_group_create.html">tiledb_group_create</a></span><span class="op">(</span><span class="st">"/tmp/my_group"</span><span class="op">)</span>

    <span class="co"># Create the same group again. If we attempt to create the same group</span>
    <span class="co"># `my_group` as shown below, TileDB will return an error.</span>
    <span class="fu"><a href="../reference/tiledb_group_create.html">tiledb_group_create</a></span><span class="op">(</span><span class="st">"/tmp.my_group"</span><span class="op">)</span>
<span class="op">}</span>, warning <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">w</span><span class="op">)</span> <span class="op">{</span>
   <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">w</span><span class="op">)</span>
<span class="op">}</span>, error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">e</span><span class="op">)</span>
<span class="op">}</span>, finally <span class="op">=</span> <span class="op">{</span><span class="op">}</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Dirk Eddelbuettel.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
