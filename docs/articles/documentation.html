<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>TileDB API Documentation â€¢ tiledb</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="TileDB API Documentation">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tiledb</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.30.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Introduction</h6></li>
    <li><a class="dropdown-item" href="../articles/introduction.html">First Steps with TileDB</a></li>
    <li><a class="dropdown-item" href="../articles/installation-options.html">Installation Options for the TileDB R Package</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>API</h6></li>
    <li><a class="dropdown-item" href="../articles/documentation.html">TileDB API Documentation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>SQL</h6></li>
    <li><a class="dropdown-item" href="../articles/data-ingestion-from-sql.html">Date Ingestion from SQL: A Commented Example</a></li>
    <li><a class="dropdown-item" href="../articles/tiledb-mariadb-examples.html">TileDB and (R)MariaDB Examples</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/TileDB-Inc/TileDB-R/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>TileDB API Documentation</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/TileDB-Inc/TileDB-R/blob/HEAD/vignettes/documentation.Rmd" class="external-link"><code>vignettes/documentation.Rmd</code></a></small>
      <div class="d-none name"><code>documentation.Rmd</code></div>
    </div>

    
    
<!--
%\VignetteIndexEntry{TileDB API Documentation}
%\VignetteEngine{simplermarkdown::mdweave_to_html}
%\VignetteEncoding{UTF-8}
-->
<p>This document follows the <a href="https://docs.tiledb.com/main/how-to" class="external-link">TileDB API usage
examples</a>. A shorter <a href="introduction.html">introductory
vignette</a> is also available.</p>
<div class="section level2">
<h2 id="prelimaries">Prelimaries<a class="anchor" aria-label="anchor" href="#prelimaries"></a>
</h2>
<p>We will show two initial and basic examples for a dense and sparse
array simply to create array data on disk to refer to later in examples
that follow.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TileDB-Inc/TileDB-R" class="external-link">tiledb</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">tdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">uridense</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tdir</span>, <span class="st">"dense"</span><span class="op">)</span></span>
<span><span class="va">uridensefix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tdir</span>, <span class="st">"densefix"</span><span class="op">)</span></span>
<span><span class="va">uridensevar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tdir</span>, <span class="st">"densevar"</span><span class="op">)</span></span>
<span><span class="va">uridensewkey</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tdir</span>, <span class="st">"denseenc"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">create_array</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">array_name</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># Check if the array already exists.</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="../reference/tiledb_object_type.html">tiledb_object_type</a></span><span class="op">(</span><span class="va">array_name</span><span class="op">)</span> <span class="op">==</span> <span class="st">"ARRAY"</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Array already exists."</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="co"># The array will be 4x4 with dimensions "rows" and "cols", with domain [1,4].</span></span>
<span>    <span class="va">dom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain.html">tiledb_domain</a></span><span class="op">(</span>dims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"rows"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">4L</span>, <span class="st">"INT32"</span><span class="op">)</span>,</span>
<span>                                  <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"cols"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">4L</span>, <span class="st">"INT32"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># The array will be dense with a single attribute "a" so each (i,j) cell can store an integer.</span></span>
<span>    <span class="va">schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, attrs <span class="op">=</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"a"</span>, type <span class="op">=</span> <span class="st">"INT32"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Create the (empty) array on disk, and return the path invisibly</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu"><a href="../reference/tiledb_array_create.html">tiledb_array_create</a></span><span class="op">(</span><span class="va">array_name</span>, <span class="va">schema</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">write_array</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">array_name</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">5L</span>, <span class="fl">9L</span>, <span class="fl">13L</span><span class="op">)</span>,</span>
<span>                    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2L</span>, <span class="fl">6L</span>, <span class="fl">10L</span>, <span class="fl">14L</span><span class="op">)</span>,</span>
<span>                    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3L</span>, <span class="fl">7L</span>, <span class="fl">11L</span>, <span class="fl">15L</span><span class="op">)</span>,</span>
<span>                    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4L</span>, <span class="fl">8L</span>, <span class="fl">12L</span>, <span class="fl">16L</span><span class="op">)</span><span class="op">)</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="co"># Open the array and write to it.</span></span>
<span>    <span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span>uri <span class="op">=</span> <span class="va">array_name</span><span class="op">)</span></span>
<span>    <span class="va">A</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">data</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">create_array</span><span class="op">(</span><span class="va">uridense</span><span class="op">)</span></span>
<span><span class="fu">write_array</span><span class="op">(</span><span class="va">uridense</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">urisparse</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tdir</span>, <span class="st">"sparse"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">create_array</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">array_name</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># Check if the array already exists.</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="../reference/tiledb_object_type.html">tiledb_object_type</a></span><span class="op">(</span><span class="va">array_name</span><span class="op">)</span> <span class="op">==</span> <span class="st">"ARRAY"</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Array already exists."</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="co"># The array will be 4x4 with dimensions "rows" and "cols", with domain [1,4].</span></span>
<span>    <span class="va">dom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain.html">tiledb_domain</a></span><span class="op">(</span>dims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"rows"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">4L</span>, <span class="st">"INT32"</span><span class="op">)</span>,</span>
<span>                                  <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"cols"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">4L</span>, <span class="st">"INT32"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># The array will be dense with a single attribute "a" so each (i,j) cell can store an integer.</span></span>
<span>    <span class="va">schema</span> <span class="op">=</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, attrs<span class="op">=</span><span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"a"</span>, type <span class="op">=</span> <span class="st">"INT32"</span><span class="op">)</span>, sparse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Create the (empty) array on disk, and return the path invisibly.</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu"><a href="../reference/tiledb_array_create.html">tiledb_array_create</a></span><span class="op">(</span><span class="va">array_name</span>, <span class="va">schema</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">write_array</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">array_name</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">I</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span></span>
<span>    <span class="va">J</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">3</span><span class="op">)</span></span>
<span>    <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">2L</span>, <span class="fl">3L</span><span class="op">)</span></span>
<span>    <span class="co"># Open the array and write to it.</span></span>
<span>    <span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span>uri <span class="op">=</span> <span class="va">array_name</span><span class="op">)</span></span>
<span>    <span class="va">A</span><span class="op">[</span><span class="va">I</span>, <span class="va">J</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">data</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">create_array</span><span class="op">(</span><span class="va">urisparse</span><span class="op">)</span></span>
<span><span class="fu">write_array</span><span class="op">(</span><span class="va">urisparse</span><span class="op">)</span></span>
<span></span>
<span><span class="va">close_and_reopen</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">arr</span>, <span class="va">txt</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_close</span><span class="op">(</span><span class="va">arr</span><span class="op">@</span><span class="va">ptr</span><span class="op">)</span></span>
<span>  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_open_with_ptr</span><span class="op">(</span><span class="va">arr</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">txt</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="api-usage">API Usage<a class="anchor" aria-label="anchor" href="#api-usage"></a>
</h2>
<div class="section level3">
<h3 id="creating-arrays">Creating Arrays<a class="anchor" aria-label="anchor" href="#creating-arrays"></a>
</h3>
<div class="section level4">
<h4 id="creating-dimensions">Creating Dimensions<a class="anchor" aria-label="anchor" href="#creating-dimensions"></a>
</h4>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TileDB-Inc/TileDB-R" class="external-link">tiledb</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create dimension</span></span>
<span><span class="va">dim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"dim1"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">2L</span>, <span class="st">"INT32"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># String dimenions: no values for domain and extent</span></span>
<span><span class="va">strdim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"dim2"</span>, <span class="cn">NULL</span>, <span class="cn">NULL</span>, <span class="st">"ASCII"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="creating-the-array-domain">Creating the Array Domain<a class="anchor" aria-label="anchor" href="#creating-the-array-domain"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TileDB-Inc/TileDB-R" class="external-link">tiledb</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">#  .. create dimensions `dim1`, `dim2`</span></span>
<span><span class="va">dim1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"dim1"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">2L</span>, <span class="st">"INT32"</span><span class="op">)</span></span>
<span><span class="va">dim2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"dim2"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">2L</span><span class="op">)</span>, <span class="fl">2L</span>, <span class="st">"INT32"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create domain with two dimensions</span></span>
<span><span class="co"># In C++: domain.add_dimensions(dim1).add_dimension(dim2)</span></span>
<span><span class="va">dom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain.html">tiledb_domain</a></span><span class="op">(</span>dims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">dim1</span>, <span class="va">dim2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="creating-attributes">Creating Attributes<a class="anchor" aria-label="anchor" href="#creating-attributes"></a>
</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create attribute</span></span>
<span><span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"attr"</span>, type <span class="op">=</span> <span class="st">"INT32"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create attribute</span></span>
<span><span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"a1"</span>, type <span class="op">=</span> <span class="st">"INT32"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Access cell value via generic or functions</span></span>
<span><span class="fu"><a href="../reference/tiledb_attribute_get_cell_val_num.html">cell_val_num</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_attribute_get_cell_val_num.html">tiledb_attribute_get_cell_val_num</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Attribute value counts can be set via a generic method and a direct method</span></span>
<span><span class="fu"><a href="../reference/tiledb_attribute_get_cell_val_num.html">cell_val_num</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span><span class="fu"><a href="../reference/tiledb_attribute_set_cell_val_num.html">tiledb_attribute_set_cell_val_num</a></span><span class="op">(</span><span class="va">attr</span>, <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## set char attribute to variable length which is encoded as a NA</span></span>
<span><span class="fu"><a href="../reference/tiledb_attribute_get_cell_val_num.html">cell_val_num</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="fu"><a href="../reference/tiledb_attribute_set_cell_val_num.html">tiledb_attribute_set_cell_val_num</a></span><span class="op">(</span><span class="va">attr</span>, <span class="cn">NA</span><span class="op">)</span></span></code></pre></div>
<div class="section level5">
<h5 id="setting-fill-values">Setting Fill Values<a class="anchor" aria-label="anchor" href="#setting-fill-values"></a>
</h5>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ... create int attribute attr</span></span>
<span><span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"a1"</span>, type <span class="op">=</span> <span class="st">"INT32"</span><span class="op">)</span></span>
<span><span class="co"># set fill value to 42L</span></span>
<span><span class="fu"><a href="../reference/tiledb_attribute_set_fill_value.html">tiledb_attribute_set_fill_value</a></span><span class="op">(</span><span class="va">attr</span>, <span class="fl">42L</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ... create variable-sized attributte attr</span></span>
<span><span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"attr"</span>, type <span class="op">=</span> <span class="st">"CHAR"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_attribute_set_cell_val_num.html">tiledb_attribute_set_cell_val_num</a></span><span class="op">(</span><span class="va">attr</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co"># set fill value to "..."</span></span>
<span><span class="fu"><a href="../reference/tiledb_attribute_set_fill_value.html">tiledb_attribute_set_fill_value</a></span><span class="op">(</span><span class="va">attr</span>, <span class="st">"..."</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="setting-a-compressor">Setting a Compressor<a class="anchor" aria-label="anchor" href="#setting-a-compressor"></a>
</h5>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"GZIP"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_filter_set_option.html">tiledb_filter_set_option</a></span><span class="op">(</span><span class="va">comp</span>,<span class="st">"COMPRESSION_LEVEL"</span>, <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a filter list with the compressor</span></span>
<span><span class="va">filter_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter_list.html">tiledb_filter_list</a></span><span class="op">(</span><span class="va">comp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create attribute with the filter list</span></span>
<span><span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"attr"</span>, <span class="st">"INT32"</span>, filter_list <span class="op">=</span> <span class="va">filter_list</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="setting-other-filters">Setting Other Filters<a class="anchor" aria-label="anchor" href="#setting-other-filters"></a>
</h5>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create filters</span></span>
<span><span class="va">f1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"BIT_WIDTH_REDUCTION"</span><span class="op">)</span></span>
<span><span class="va">f2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"ZSTD"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a filter list with the two filters</span></span>
<span><span class="va">filter_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter_list.html">tiledb_filter_list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">f1</span>,<span class="va">f2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create attribute with the filter list</span></span>
<span><span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"attr"</span>, <span class="st">"INT32"</span>, filter_list <span class="op">=</span> <span class="va">filter_list</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="creating-the-array-schema">Creating the Array Schema<a class="anchor" aria-label="anchor" href="#creating-the-array-schema"></a>
</h4>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ... create domain dom</span></span>
<span><span class="va">attr1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"attr1"</span>, <span class="st">"INT32"</span>, filter_list <span class="op">=</span> <span class="va">filter_list</span><span class="op">)</span></span>
<span><span class="va">attr2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"attr2"</span>, <span class="st">"FLOAT64"</span>, filter_list <span class="op">=</span> <span class="va">filter_list</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a dense array</span></span>
<span><span class="va">schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">attr1</span>, <span class="va">attr2</span><span class="op">)</span>, sparse <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># Or, create a sparse array</span></span>
<span><span class="co"># schema &lt;- tiledb_array_schema(dom, c(attr1, attr2), sparse = TRUE)</span></span></code></pre></div>
<div class="section level5">
<h5 id="setting-the-tile-and-cell-order">Setting the Tile and Cell Order<a class="anchor" aria-label="anchor" href="#setting-the-tile-and-cell-order"></a>
</h5>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ... create domain dom</span></span>
<span><span class="co"># ... create attributes attr1, attr2</span></span>
<span></span>
<span><span class="co"># The tile and order can be "COL_MAJOR" or "ROW_MAJOR"</span></span>
<span><span class="va">schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">attr1</span>, <span class="va">attr2</span><span class="op">)</span>,</span>
<span>                              cell_order <span class="op">=</span> <span class="st">"COL_MAJOR"</span>,</span>
<span>                              tile_order <span class="op">=</span> <span class="st">"COL_MAJOR"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="setting-the-data-tile-capacity">Setting the Data Tile Capacity<a class="anchor" aria-label="anchor" href="#setting-the-data-tile-capacity"></a>
</h5>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set capacity</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_schema_get_capacity.html">capacity</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">100000</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_schema_set_capacity.html">tiledb_array_schema_set_capacity</a></span><span class="op">(</span><span class="va">schema</span>, <span class="fl">10000</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get capacity</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_schema_get_capacity.html">capacity</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_schema_get_capacity.html">tiledb_array_schema_get_capacity</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="allowing-duplicates">Allowing Duplicates<a class="anchor" aria-label="anchor" href="#allowing-duplicates"></a>
</h5>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">schema</a></span><span class="op">(</span><span class="va">urisparse</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get 'duplicates allowed?' status</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_schema_get_allows_dups.html">allows_dups</a></span><span class="op">(</span><span class="va">sch</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_schema_get_allows_dups.html">tiledb_array_schema_get_allows_dups</a></span><span class="op">(</span><span class="va">sch</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># set 'duplicates allowed?' status</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_schema_get_allows_dups.html">allows_dups</a></span><span class="op">(</span><span class="va">sch</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_schema_set_allows_dups.html">tiledb_array_schema_set_allows_dups</a></span><span class="op">(</span><span class="va">sch</span>, <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="checking-correctness">Checking Correctness<a class="anchor" aria-label="anchor" href="#checking-correctness"></a>
</h5>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tiledb_array_schema_check.html">check</a></span><span class="op">(</span><span class="va">sch</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_schema_check.html">tiledb_array_schema_check</a></span><span class="op">(</span><span class="va">sch</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="setting-filters">Setting Filters<a class="anchor" aria-label="anchor" href="#setting-filters"></a>
</h4>
<div class="section level5">
<h5 id="creating-a-filter-list">Creating a Filter List<a class="anchor" aria-label="anchor" href="#creating-a-filter-list"></a>
</h5>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a "GZIP" compression filter</span></span>
<span><span class="va">flt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"GZIP"</span><span class="op">)</span></span>
<span><span class="co"># set the option 'COMPRESSION_LEVEL' to 10</span></span>
<span><span class="fu"><a href="../reference/tiledb_filter_set_option.html">tiledb_filter_set_option</a></span><span class="op">(</span><span class="va">flt</span>, <span class="st">"COMPRESSION_LEVEL"</span>, <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a filter list with this filter</span></span>
<span><span class="va">fltlst</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter_list.html">tiledb_filter_list</a></span><span class="op">(</span><span class="va">flt</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="other-filters">Other Filters<a class="anchor" aria-label="anchor" href="#other-filters"></a>
</h5>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a filter list object with both</span></span>
<span><span class="va">fltlst</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter_list.html">tiledb_filter_list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">flt1</span>, <span class="va">flt2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="setting-the-tile-chunk-size">Setting the Tile Chunk Size<a class="anchor" aria-label="anchor" href="#setting-the-tile-chunk-size"></a>
</h5>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ... create filter list</span></span>
<span><span class="fu"><a href="../reference/tiledb_filter_list_set_max_chunk_size.html">set_max_chunk_size</a></span><span class="op">(</span><span class="va">filter_list</span>, <span class="fl">10000</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_filter_list_set_max_chunk_size.html">tiledb_filter_list_set_max_chunk_size</a></span><span class="op">(</span><span class="va">filter_list</span>, <span class="fl">10000</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/tiledb_filter_list_get_max_chunk_size.html">max_chunk_size</a></span><span class="op">(</span><span class="va">filter_list</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_filter_list_get_max_chunk_size.html">tiledb_filter_list_get_max_chunk_size</a></span><span class="op">(</span><span class="va">filter_list</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="setting-a-filter-list-for-an-attribute">Setting a Filter List for an Attribute<a class="anchor" aria-label="anchor" href="#setting-a-filter-list-for-an-attribute"></a>
</h5>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create (or access) an attribute</span></span>
<span><span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"INT32"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a filter list</span></span>
<span><span class="va">flt1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"BIT_WIDTH_REDUCTION"</span><span class="op">)</span></span>
<span><span class="va">flt2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"ZSTD"</span><span class="op">)</span></span>
<span><span class="va">fltlst</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter_list.html">tiledb_filter_list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">flt1</span>, <span class="va">flt2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># set the filter list</span></span>
<span><span class="fu"><a href="../reference/generics.html">filter_list</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">fltlst</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="setting-a-filter-list-for-a-dimension">Setting a Filter List for a Dimension<a class="anchor" aria-label="anchor" href="#setting-a-filter-list-for-a-dimension"></a>
</h5>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"d"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">10L</span><span class="op">)</span>, <span class="fl">1L</span>, <span class="st">"INT32"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a filter list</span></span>
<span><span class="va">flt1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"BIT_WIDTH_REDUCTION"</span><span class="op">)</span></span>
<span><span class="va">flt2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"ZSTD"</span><span class="op">)</span></span>
<span><span class="va">fltlst</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter_list.html">tiledb_filter_list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">flt1</span>, <span class="va">flt2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># assign the filter list</span></span>
<span><span class="fu"><a href="../reference/generics.html">filter_list</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">fltlst</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="setting-a-filter-list-for-all-dimensions">Setting a Filter List for All Dimensions<a class="anchor" aria-label="anchor" href="#setting-a-filter-list-for-all-dimensions"></a>
</h5>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ... create (or retrieve) array schema sch</span></span>
<span><span class="co"># ... create filter list fl</span></span>
<span></span>
<span><span class="co"># assign filter list to schema</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_schema_set_coords_filter_list.html">tiledb_array_schema_set_coords_filter_list</a></span><span class="op">(</span><span class="va">sch</span>, <span class="va">fl</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Alternatively create the schema and set the coordinates filter list</span></span>
<span><span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">attr1</span>, <span class="va">attr2</span><span class="op">)</span>, coords_filter_list <span class="op">=</span> <span class="va">fl</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="setting-a-filter-list-for-variable-sized-value-offsets">Setting a Filter List for Variable-Sized Value Offsets<a class="anchor" aria-label="anchor" href="#setting-a-filter-list-for-variable-sized-value-offsets"></a>
</h5>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ... create (or retrieve) array schema sch</span></span>
<span><span class="co"># ... create filter list fl</span></span>
<span></span>
<span><span class="co"># assign filter list to schema</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_schema_set_offsets_filter_list.html">tiledb_array_schema_set_offsets_filter_list</a></span><span class="op">(</span><span class="va">sch</span>, <span class="va">fl</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create the schema setting the offsets filter list</span></span>
<span><span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">attr1</span>, <span class="va">attr2</span><span class="op">)</span>, offsets_filter_list <span class="op">=</span> <span class="va">fl</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="setting-coordinate-and-offset-filters">Setting Coordinate and Offset Filters<a class="anchor" aria-label="anchor" href="#setting-coordinate-and-offset-filters"></a>
</h5>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ... create domain dom</span></span>
<span><span class="co"># ... create attributes attr1, attr2</span></span>
<span><span class="co"># ... create filter lists fl1, fl2, similar to attributes</span></span>
<span><span class="va">f1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"BIT_WIDTH_REDUCTION"</span><span class="op">)</span></span>
<span><span class="va">f2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter.html">tiledb_filter</a></span><span class="op">(</span><span class="st">"ZSTD"</span><span class="op">)</span></span>
<span><span class="va">fl1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter_list.html">tiledb_filter_list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">f1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">fl2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter_list.html">tiledb_filter_list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">f2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create the schema setting the coordinates and offsets filter lists</span></span>
<span><span class="va">schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">attr1</span>, <span class="va">attr2</span><span class="op">)</span>,</span>
<span>                              coords_filter_list <span class="op">=</span> <span class="va">fl1</span>,</span>
<span>                              offsets_filter_list <span class="op">=</span> <span class="va">fl2</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="creating-the-array">Creating the Array<a class="anchor" aria-label="anchor" href="#creating-the-array"></a>
</h4>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ... create array schema</span></span>
<span></span>
<span><span class="co"># Create the array</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_create.html">tiledb_array_create</a></span><span class="op">(</span><span class="va">uridense</span>, <span class="va">schema</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="creating-encrypted-arrays">Creating Encrypted Arrays<a class="anchor" aria-label="anchor" href="#creating-encrypted-arrays"></a>
</h4>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># assume previously created schema 'sch'</span></span>
<span><span class="co"># use encryption key</span></span>
<span><span class="va">encryption_key</span> <span class="op">&lt;-</span> <span class="st">"0123456789abcdeF0123456789abcdeF"</span></span>
<span></span>
<span><span class="co"># create encrypted array at 'uri' with schema 'sch'</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_create.html">tiledb_array_create</a></span><span class="op">(</span><span class="va">uridensewkey</span>, <span class="va">sch</span>, <span class="va">encryption_key</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="writing-arrays">Writing Arrays<a class="anchor" aria-label="anchor" href="#writing-arrays"></a>
</h3>
<div class="section level4">
<h4 id="writing-in-dense-subarrays">Writing in Dense Subarrays<a class="anchor" aria-label="anchor" href="#writing-in-dense-subarrays"></a>
</h4>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## prepare a larger 5 x 5 to embed into</span></span>
<span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">d1</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"d1"</span>, domain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">5L</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">d2</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"d2"</span>, domain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">5L</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain.html">tiledb_domain</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">d1</span>, <span class="va">d2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">val</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"val"</span>, type <span class="op">=</span> <span class="st">"INT32"</span><span class="op">)</span></span>
<span><span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">val</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_create.html">tiledb_array_create</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="va">sch</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">25</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span>, <span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">arr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span><span class="va">tmp</span>, return_as <span class="op">=</span> <span class="st">"data.frame"</span><span class="op">)</span></span>
<span><span class="va">arr</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">dat</span></span>
<span></span>
<span></span>
<span><span class="co"># Prepare a 2x3 dense array</span></span>
<span><span class="co"># Contrary to Python, R by default stores arrays in col-major order</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span>, <span class="fl">2L</span>, <span class="fl">5L</span>, <span class="fl">3L</span>, <span class="fl">6L</span><span class="op">)</span>, dim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Prepare the [1,2] x [2,4] subarray to write to</span></span>
<span><span class="va">I</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">J</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Open the array and write the data to it</span></span>
<span><span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_dense</a></span><span class="op">(</span>uri <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span></span>
<span><span class="va">A</span><span class="op">[</span><span class="va">I</span>, <span class="va">J</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">data</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">tmp</span>, recursive<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="section level5">
<h5 id="basic-writing-using-low-level-code">Basic Writing using Low-Level Code<a class="anchor" aria-label="anchor" href="#basic-writing-using-low-level-code"></a>
</h5>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_ctx.html">tiledb_ctx</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">arrptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_open</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">uridense</span>, <span class="st">"WRITE"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## data: simple (integer sequence) of 1:16 times 10</span></span>
<span><span class="va">vec</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">16</span> <span class="op">*</span> <span class="fl">10L</span></span>
<span><span class="va">subarr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">4L</span>, <span class="fl">1L</span>,<span class="fl">4L</span><span class="op">)</span></span>
<span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">arrptr</span>, <span class="st">"WRITE"</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_subarray</span><span class="op">(</span><span class="va">qryptr</span>, <span class="va">subarr</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_layout</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"COL_MAJOR"</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_buffer</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"a"</span>, <span class="va">vec</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_submit</span><span class="op">(</span><span class="va">qryptr</span><span class="op">)</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_close</span><span class="op">(</span><span class="va">arrptr</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="writing-sparse-cells">Writing Sparse Cells<a class="anchor" aria-label="anchor" href="#writing-sparse-cells"></a>
</h4>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="va">urisparse</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">tmp</span>, recursive<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">d1</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"d1"</span>, domain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">5L</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">d2</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"d2"</span>, domain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">5L</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain.html">tiledb_domain</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">d1</span>, <span class="va">d2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">val</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"val"</span>, type <span class="op">=</span> <span class="st">"INT32"</span><span class="op">)</span></span>
<span><span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, <span class="va">val</span>, sparse<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_create.html">tiledb_array_create</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="va">sch</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Prepare some data</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3L</span>, <span class="fl">4L</span>, <span class="fl">1L</span>, <span class="fl">2L</span><span class="op">)</span></span>
<span></span>
<span><span class="va">I</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">J</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Open the array and write the data to it</span></span>
<span><span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span>uri <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span></span>
<span><span class="va">A</span><span class="op">[</span><span class="va">I</span>, <span class="va">J</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">data</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="writing-encrypted-arrays">Writing Encrypted Arrays<a class="anchor" aria-label="anchor" href="#writing-encrypted-arrays"></a>
</h4>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># open for writing with corresponding encryption key</span></span>
<span><span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span><span class="va">uridensewkey</span>, encryption_key <span class="op">=</span> <span class="va">encryption_key</span><span class="op">)</span></span>
<span><span class="co"># access array as usual</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="fixed-length-attributes">Fixed-length Attributes<a class="anchor" aria-label="anchor" href="#fixed-length-attributes"></a>
</h4>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.exists</a></span><span class="op">(</span><span class="va">uridensefix</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">uridensefix</span>, recursive<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">d1</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"d1"</span>, domain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">d2</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"d2"</span>, domain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain.html">tiledb_domain</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">d1</span>, <span class="va">d2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">vec</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">32</span> <span class="op">*</span> <span class="fl">10L</span></span>
<span><span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"a"</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/r_to_tiledb_type.html">r_to_tiledb_type</a></span><span class="op">(</span><span class="va">vec</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## set to two values per cell</span></span>
<span><span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_attribute_set_cell_val_num</span><span class="op">(</span><span class="va">attr</span><span class="op">@</span><span class="va">ptr</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema.html">tiledb_array_schema</a></span><span class="op">(</span><span class="va">dom</span>, <span class="va">attr</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_create.html">tiledb_array_create</a></span><span class="op">(</span><span class="va">uridensefix</span>, <span class="va">sch</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_ctx.html">tiledb_ctx</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">arrptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_open</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">uridensefix</span>, <span class="st">"WRITE"</span><span class="op">)</span></span>
<span><span class="va">subarr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">4L</span>, <span class="fl">1L</span>,<span class="fl">4L</span><span class="op">)</span></span>
<span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">arrptr</span>, <span class="st">"WRITE"</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_subarray</span><span class="op">(</span><span class="va">qryptr</span>, <span class="va">subarr</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_layout</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"COL_MAJOR"</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_buffer</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"a"</span>, <span class="va">vec</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_submit</span><span class="op">(</span><span class="va">qryptr</span><span class="op">)</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_close</span><span class="op">(</span><span class="va">arrptr</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#TODO Higher-level R support</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="var-length-attributes">Var-length Attributes<a class="anchor" aria-label="anchor" href="#var-length-attributes"></a>
</h4>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.exists</a></span><span class="op">(</span><span class="va">uridensevar</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">uridensevar</span>, recursive<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## Define array</span></span>
<span><span class="co">## The array will be 4x4 with dimensions "rows" and "cols", with domain [1,4].</span></span>
<span><span class="va">dom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain.html">tiledb_domain</a></span><span class="op">(</span>dims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"rows"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">4L</span>, <span class="st">"INT32"</span><span class="op">)</span>,</span>
<span>                              <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"cols"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">4L</span>, <span class="st">"INT32"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attr.html">tiledb_attr</a></span><span class="op">(</span><span class="st">"a1"</span>, type <span class="op">=</span> <span class="st">"CHAR"</span><span class="op">)</span></span>
<span><span class="co">## set to variable length</span></span>
<span><span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_attribute_set_cell_val_num</span><span class="op">(</span><span class="va">attr</span><span class="op">@</span><span class="va">ptr</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## now set the schema</span></span>
<span><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_ctx.html">tiledb_ctx</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">schptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_schema_create</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="st">"DENSE"</span><span class="op">)</span></span>
<span><span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_schema_set_domain</span><span class="op">(</span><span class="va">schptr</span>, <span class="va">dom</span><span class="op">@</span><span class="va">ptr</span><span class="op">)</span></span>
<span><span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_schema_set_cell_order</span><span class="op">(</span><span class="va">schptr</span>, <span class="st">"COL_MAJOR"</span><span class="op">)</span></span>
<span><span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_schema_set_tile_order</span><span class="op">(</span><span class="va">schptr</span>, <span class="st">"COL_MAJOR"</span><span class="op">)</span></span>
<span><span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_schema_add_attribute</span><span class="op">(</span><span class="va">schptr</span>, <span class="va">attr</span><span class="op">@</span><span class="va">ptr</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co">## Create the (empty) array on disk.</span></span>
<span><span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_create</span><span class="op">(</span><span class="va">uridensevar</span>, <span class="va">schptr</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="st">"abbcccddeeefghhhijjjkklmnoop"</span>;</span>
<span><span class="va">offsets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0L</span>, <span class="fl">1L</span>, <span class="fl">3L</span>, <span class="fl">6L</span>, <span class="fl">8L</span>, <span class="fl">11L</span>, <span class="fl">12L</span>, <span class="fl">13L</span>, <span class="fl">16L</span>, <span class="fl">17L</span>, <span class="fl">20L</span>, <span class="fl">22L</span>, <span class="fl">23L</span>, <span class="fl">24L</span>, <span class="fl">25L</span>, <span class="fl">27L</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_ctx.html">tiledb_ctx</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">arrptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_open</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">uridensevar</span>, <span class="st">"WRITE"</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">arrptr</span>, <span class="st">"WRITE"</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_layout</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"COL_MAJOR"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">bufptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_buffer_var_char_create</span><span class="op">(</span><span class="va">offsets</span>, <span class="va">data</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_buffer_var_char</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"a1"</span>, <span class="va">bufptr</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_submit</span><span class="op">(</span><span class="va">qryptr</span><span class="op">)</span></span>
<span><span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_close</span><span class="op">(</span><span class="va">arrptr</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#TODO Higher-level R support</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="writing-at-a-timestamp">Writing at a Timestamp<a class="anchor" aria-label="anchor" href="#writing-at-a-timestamp"></a>
</h4>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 'at' uses Sys.time() from R in seconds, and shifts back 10 minutes</span></span>
<span><span class="va">at</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">10</span><span class="op">*</span><span class="fl">60</span></span>
<span></span>
<span><span class="co"># 'arr' is an already created array, could also be encrypted and carry key</span></span>
<span><span class="va">arr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_open_at.html">tiledb_array_open_at</a></span><span class="op">(</span><span class="va">arr</span>, <span class="st">"WRITE"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">600</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># arr is now open for writing, any suitable content can be written the usual way</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="getting-the-fragment-info">Getting the Fragment Info<a class="anchor" aria-label="anchor" href="#getting-the-fragment-info"></a>
</h4>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># continuing from previous example on dense variable length array</span></span>
<span><span class="co"># (but this works of course with any array after a write is needed</span></span>
<span></span>
<span><span class="co"># Number of fragments</span></span>
<span><span class="va">numfrag</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_get_fragment_num.html">tiledb_query_get_fragment_num</a></span><span class="op">(</span><span class="va">qry</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># URI of given fragment, with 0 &lt;= idx &lt; numfrag</span></span>
<span><span class="va">uri</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_get_fragment_uri.html">tiledb_query_get_fragment_uri</a></span><span class="op">(</span><span class="va">qry</span>, <span class="va">idx</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Timestamp range of given fragment, with 0 &lt;= idx &lt; numfrag</span></span>
<span><span class="va">tsrange</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_get_fragment_timestamp_range.html">tiledb_query_get_fragment_timestamp_range</a></span><span class="op">(</span><span class="va">qry</span>, <span class="va">idx</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="reading-arrays">Reading Arrays<a class="anchor" aria-label="anchor" href="#reading-arrays"></a>
</h3>
<div class="section level4">
<h4 id="reading-the-array-schema">Reading the Array Schema<a class="anchor" aria-label="anchor" href="#reading-the-array-schema"></a>
</h4>
<div class="section level5">
<h5 id="inspecting-the-array-schema">Inspecting the array schema<a class="anchor" aria-label="anchor" href="#inspecting-the-array-schema"></a>
</h5>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get a schema directly from storage, uri holds a valid array URI</span></span>
<span><span class="va">uri</span> <span class="op">&lt;-</span> <span class="st">"&lt;array_uri&gt;"</span></span>
<span><span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">schema</a></span><span class="op">(</span><span class="va">uri</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get an encrypted scheme directory from storage, enc_key is the AES-256 key</span></span>
<span><span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">schema</a></span><span class="op">(</span><span class="va">uri</span>, <span class="va">enc_key</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get a schema from an already openened array</span></span>
<span><span class="co"># using a sparse array example, works the same for dense arrays</span></span>
<span><span class="va">array_name</span> <span class="op">&lt;-</span> <span class="va">urisparse</span></span>
<span><span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span>uri <span class="op">=</span> <span class="va">array_name</span>, is.sparse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">schema</a></span><span class="op">(</span><span class="va">A</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># one can also open encrypted arrays with key for AES-256 encryption</span></span>
<span><span class="co"># and all other options (for sparse arrays, data.frame objects...)</span></span>
<span><span class="va">key</span> <span class="op">&lt;-</span> <span class="st">"0123456789abcdeF0123456789abcdeF"</span></span>
<span><span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span>uri <span class="op">=</span> <span class="va">array_name</span>, encryption_key <span class="op">=</span> <span class="va">key</span><span class="op">)</span></span>
<span><span class="va">sch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">schema</a></span><span class="op">(</span><span class="va">A</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get array schema, this shows the sparse accessor</span></span>
<span><span class="co"># and it is similar for tiledb_dense()</span></span>
<span><span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span>uri <span class="op">=</span> <span class="va">urisparse</span>, is.sparse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">schema</a></span><span class="op">(</span><span class="va">A</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get array type</span></span>
<span><span class="va">sparse</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">is.sparse</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get tile capacity</span></span>
<span><span class="va">t_capacity</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_schema_get_capacity.html">capacity</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get tile order</span></span>
<span><span class="va">t_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">tile_order</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get cell order</span></span>
<span><span class="va">c_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">cell_order</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get coordinates and offset filter list</span></span>
<span><span class="va">reslist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">filter_list</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get the array domain</span></span>
<span><span class="va">dom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">domain</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get all attributes as list</span></span>
<span><span class="va">attrs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">attrs</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check if given attribute exists</span></span>
<span><span class="va">has_attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/has_attribute.html">has_attribute</a></span><span class="op">(</span><span class="va">schema</span>, <span class="st">"attr"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get attribute from name</span></span>
<span><span class="va">attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">attrs</a></span><span class="op">(</span><span class="va">schema</span>, <span class="st">"attr"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Dump the array schema in ASCII format in the selected output</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/methods/show.html" class="external-link">show</a></span><span class="op">(</span><span class="va">schema</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="inspecting-domain">Inspecting Domain<a class="anchor" aria-label="anchor" href="#inspecting-domain"></a>
</h5>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ... get array schema</span></span>
<span><span class="co"># ... get domain from schema</span></span>
<span></span>
<span><span class="co"># Get the domain datatype (i.e., the datatype of all dimensions)</span></span>
<span><span class="va">type</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">datatype</a></span><span class="op">(</span><span class="va">dom</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get number of dimensions</span></span>
<span><span class="va">dim_num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">dom</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get all dimension</span></span>
<span><span class="va">dims</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">dimensions</a></span><span class="op">(</span><span class="va">dom</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get dimension by index (0 &lt;= i &lt; dim_num)</span></span>
<span><span class="va">dim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain_get_dimension_from_index.html">tiledb_domain_get_dimension_from_index</a></span><span class="op">(</span><span class="va">dom</span>, <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get dimension by name</span></span>
<span><span class="va">dim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain_get_dimension_from_name.html">tiledb_domain_get_dimension_from_name</a></span><span class="op">(</span><span class="va">dom</span>, <span class="st">"dimname"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check dimension for name</span></span>
<span><span class="fu"><a href="../reference/tiledb_domain_has_dimension.html">tiledb_domain_has_dimension</a></span><span class="op">(</span><span class="va">dom</span>, <span class="st">"dimname"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Dump the domain in ASCII format in the selected output</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/methods/show.html" class="external-link">show</a></span><span class="op">(</span><span class="va">dom</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="inspecting-dimensions">Inspecting Dimensions<a class="anchor" aria-label="anchor" href="#inspecting-dimensions"></a>
</h5>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ... get array schema</span></span>
<span><span class="co"># ... get domain</span></span>
<span><span class="co"># ... get dimension by index or name</span></span>
<span></span>
<span><span class="co"># Get dimension name</span></span>
<span><span class="va">dim_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">name</a></span><span class="op">(</span><span class="va">dim</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get dimension datatype</span></span>
<span><span class="va">dim_type</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">datatype</a></span><span class="op">(</span><span class="va">dim</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get dimension domain</span></span>
<span><span class="va">domain</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">domain</a></span><span class="op">(</span><span class="va">dim</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get tile extent</span></span>
<span><span class="va">tile_extent</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">tile</a></span><span class="op">(</span><span class="va">dim</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Dump the dimension in ASCII format in the selected output</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/methods/show.html" class="external-link">show</a></span><span class="op">(</span><span class="va">dim</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="inspecting-attributes">Inspecting Attributes<a class="anchor" aria-label="anchor" href="#inspecting-attributes"></a>
</h5>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ... get array schema</span></span>
<span><span class="co"># ... get attribute by index or name</span></span>
<span></span>
<span><span class="co"># Get attribute name</span></span>
<span><span class="va">attr_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">name</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get attribute datatype</span></span>
<span><span class="va">attr_type</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">datatype</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get filter list</span></span>
<span><span class="va">filter_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">filter_list</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check if attribute is variable-length</span></span>
<span><span class="va">is_var</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attribute_is_variable_sized.html">tiledb_attribute_is_variable_sized</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get number of values per cell</span></span>
<span><span class="va">num</span> <span class="op">&lt;-</span> <span class="fu">ncells</span><span class="op">(</span><span class="va">attr</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get cell size for this attribute</span></span>
<span><span class="va">sz</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_attribute_get_cell_size.html">tiledb_attribute_get_cell_size</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get the fill value (for both fixed and variable sized attributes)</span></span>
<span><span class="fu"><a href="../reference/tiledb_attribute_get_fill_value.html">tiledb_attribute_get_fill_value</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Dump the attribute in ASCII format in the selected output</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/methods/show.html" class="external-link">show</a></span><span class="op">(</span><span class="va">attr</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="inspecting-filters">Inspecting Filters<a class="anchor" aria-label="anchor" href="#inspecting-filters"></a>
</h5>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># dim hold a previously created or load Dimension object</span></span>
<span><span class="va">fltrlst</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">filter_list</a></span><span class="op">(</span><span class="va">dim</span><span class="op">)</span></span>
<span><span class="co"># or fltrlst &lt;- filter_list(attr) for some attribute `attr`</span></span>
<span></span>
<span><span class="co"># get number of filter</span></span>
<span><span class="va">nb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generics.html">nfilters</a></span><span class="op">(</span><span class="va">fltrlst</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get max chunk size</span></span>
<span><span class="va">mxsz</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_filter_list_get_max_chunk_size.html">max_chunk_size</a></span><span class="op">(</span><span class="va">fltrlst</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get filter by index from filter list (0 &lt;= idx &lt; num_filters)</span></span>
<span><span class="va">idx</span> <span class="op">&lt;-</span> <span class="va">i</span></span>
<span><span class="va">fltr</span> <span class="op">&lt;-</span> <span class="va">fltrlst</span><span class="op">[</span><span class="va">idx</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># get option (that is filter-dependent) from filter</span></span>
<span><span class="fu"><a href="../reference/tiledb_filter_get_option.html">tiledb_filter_get_option</a></span><span class="op">(</span><span class="va">fltr</span>, <span class="st">"COMPRESSION_LEVEL"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># set option (that is filter-dependent) for filter</span></span>
<span><span class="fu"><a href="../reference/tiledb_filter_set_option.html">tiledb_filter_set_option</a></span><span class="op">(</span><span class="va">fltr</span>, <span class="st">"COMPRESSION_LEVEL"</span>, <span class="fl">9</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get filter type</span></span>
<span><span class="fu"><a href="../reference/tiledb_filter_type.html">tiledb_filter_type</a></span><span class="op">(</span><span class="va">fltr</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="basic-reading">Basic Reading<a class="anchor" aria-label="anchor" href="#basic-reading"></a>
</h4>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Open a dense array</span></span>
<span><span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span>uri <span class="op">=</span> <span class="va">uridense</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or, open a sparse array</span></span>
<span><span class="co"># A &lt;- tiledb_sparse(uri = "&lt;array-uri&gt;", ctx=ctx)</span></span>
<span></span>
<span><span class="co"># Slice only rows 1, 2 and cols 2, 3, 4</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">A</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/methods/show.html" class="external-link">show</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre></div>
<div class="section level5">
<h5 id="basic-reading-using-low-level-code">Basic Reading using Low-Level Code<a class="anchor" aria-label="anchor" href="#basic-reading-using-low-level-code"></a>
</h5>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_ctx.html">tiledb_ctx</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">arrptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_open</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">uridense</span>, <span class="st">"READ"</span><span class="op">)</span></span>
<span><span class="co">## subarray of rows 1,2 and cols 2,3,4</span></span>
<span><span class="va">subarr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">2L</span>, <span class="fl">2L</span>,<span class="fl">4L</span><span class="op">)</span></span>
<span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">arrptr</span>, <span class="st">"READ"</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_subarray</span><span class="op">(</span><span class="va">qryptr</span>, <span class="va">subarr</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_layout</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"COL_MAJOR"</span><span class="op">)</span></span>
<span><span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span>  <span class="co"># reserve space</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_buffer</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"a"</span>, <span class="va">v</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_submit</span><span class="op">(</span><span class="va">qryptr</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span>         <span class="co"># unformed array, no coordinates</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_close</span><span class="op">(</span><span class="va">arrptr</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="variable-length-attributes">Variable-length Attributes<a class="anchor" aria-label="anchor" href="#variable-length-attributes"></a>
</h5>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_ctx.html">tiledb_ctx</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">arrptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_open</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">uridensevar</span>, <span class="st">"READ"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">subarr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">4L</span>, <span class="fl">1L</span>,<span class="fl">4L</span><span class="op">)</span></span>
<span><span class="va">bufptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_buffer_var_char_alloc</span><span class="op">(</span><span class="va">arrptr</span>, <span class="va">subarr</span>, <span class="st">"a1"</span>, <span class="fl">16</span>, <span class="fl">100</span><span class="op">)</span></span>
<span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">arrptr</span>, <span class="st">"READ"</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_subarray</span><span class="op">(</span><span class="va">qryptr</span>, <span class="va">subarr</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_layout</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"COL_MAJOR"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_buffer_var_char</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"a1"</span>, <span class="va">bufptr</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_submit</span><span class="op">(</span><span class="va">qryptr</span><span class="op">)</span></span>
<span><span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_close</span><span class="op">(</span><span class="va">arrptr</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mat</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_get_buffer_var_char</span><span class="op">(</span><span class="va">bufptr</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mat</span>, quote<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="getting-the-non-empty-domain">Getting the Non-empty Domain<a class="anchor" aria-label="anchor" href="#getting-the-non-empty-domain"></a>
</h5>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># example with one fixed- and one variable-sized domain</span></span>
<span><span class="va">dom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_domain.html">tiledb_domain</a></span><span class="op">(</span>dims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"d1"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">4L</span>, <span class="st">"INT32"</span><span class="op">)</span>,</span>
<span>                              <span class="fu"><a href="../reference/tiledb_dim.html">tiledb_dim</a></span><span class="op">(</span><span class="st">"d2"</span>, <span class="cn">NULL</span>, <span class="cn">NULL</span>, <span class="st">"ASCII"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ... add attribute(s), write content, ...</span></span>
<span><span class="co"># ... arr is the array opened</span></span>
<span></span>
<span><span class="co"># retrieve non-empty domain for fixed-sized dimension</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_get_non_empty_domain_from_index.html">tiledb_array_get_non_empty_domain_from_index</a></span><span class="op">(</span><span class="va">arr</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_get_non_empty_domain_from_name.html">tiledb_array_get_non_empty_domain_from_name</a></span><span class="op">(</span><span class="va">arr</span>, <span class="st">"d1"</span><span class="op">)</span></span>
<span><span class="co"># retrieve non-empty domain for variable-sized dimension</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_get_non_empty_domain_from_index.html">tiledb_array_get_non_empty_domain_from_index</a></span><span class="op">(</span><span class="va">arr</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_array_get_non_empty_domain_from_name.html">tiledb_array_get_non_empty_domain_from_name</a></span><span class="op">(</span><span class="va">arr</span>, <span class="st">"d2"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="reopening-arrays">Reopening Arrays<a class="anchor" aria-label="anchor" href="#reopening-arrays"></a>
</h5>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Arrays are reopened automatically for you based on</span></span>
<span><span class="co"># read or write being performed. For direct pointer-based</span></span>
<span><span class="co"># access you can also explicitly reopen</span></span>
<span><span class="va">arr</span><span class="op">@</span><span class="va">ptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_reopen</span><span class="op">(</span><span class="va">arr</span><span class="op">@</span><span class="va">ptr</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="reading-encrypted-arrays">Reading Encrypted Arrays<a class="anchor" aria-label="anchor" href="#reading-encrypted-arrays"></a>
</h4>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Open the array and read as a data.frame from it.</span></span>
<span><span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array.html">tiledb_array</a></span><span class="op">(</span>uri <span class="op">=</span> <span class="va">array_name</span>, return_as <span class="op">=</span> <span class="st">"data.frame"</span>,</span>
<span>                  encryption_key <span class="op">=</span> <span class="va">encryption_key</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Slice rows 1 and 2, and cols 2, 3 and 4</span></span>
<span><span class="va">A</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># timestamps for TileDB are milliseconds since epoch, we use</span></span>
<span><span class="co"># R Datime object to pass the value</span></span>
<span><span class="va">tstamp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="fl">1577955845.678</span>, origin<span class="op">=</span><span class="st">"1970-01-01"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># open the array for reading at the timestamp</span></span>
<span><span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_array_open_at.html">tiledb_array_open_at</a></span><span class="op">(</span><span class="va">A</span>, <span class="st">"READ"</span>, <span class="va">tstamp</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="multi-range-subarrays">Multi-range Subarrays<a class="anchor" aria-label="anchor" href="#multi-range-subarrays"></a>
</h4>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create query, allocate result buffer, ...</span></span>
<span></span>
<span><span class="co"># add two query range on the first dimension</span></span>
<span><span class="va">qry</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_add_range.html">tiledb_query_add_range</a></span><span class="op">(</span><span class="va">qry</span>, <span class="va">schema</span>, <span class="st">"d1"</span>, <span class="fl">2L</span>, <span class="fl">4L</span><span class="op">)</span></span>
<span><span class="va">qry</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_add_range.html">tiledb_query_add_range</a></span><span class="op">(</span><span class="va">qry</span>, <span class="va">schema</span>, <span class="st">"d1"</span>, <span class="fl">6L</span>, <span class="fl">8L</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># add a query range on the second dimension, using variable size</span></span>
<span><span class="va">qry</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_add_range.html">tiledb_query_add_range</a></span><span class="op">(</span><span class="va">qry</span>, <span class="va">schema</span>, <span class="st">"d2"</span>, <span class="st">"caaa"</span>, <span class="st">"gzzz"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># number of ranges given index</span></span>
<span><span class="va">num</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_get_range_num.html">tiledb_query_get_range_num</a></span><span class="op">(</span><span class="va">qry</span>, <span class="va">idx</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># range start, end and stride for range i (1 &lt;= i &lt;= num)</span></span>
<span><span class="va">rng</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_get_range.html">tiledb_query_get_range</a></span><span class="op">(</span><span class="va">qry</span>, <span class="va">idx</span>, <span class="va">i</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># range start and end for variable-sized dimension for range i (1 &lt;= i &lt;= num)</span></span>
<span><span class="va">strrng</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_get_range_var.html">tiledb_query_get_range_var</a></span><span class="op">(</span><span class="va">qry</span>, <span class="va">idx</span>, <span class="va">i</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="incomplete-queries">Incomplete Queries<a class="anchor" aria-label="anchor" href="#incomplete-queries"></a>
</h4>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_ctx.html">tiledb_ctx</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">arrptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_open</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">uridense</span>, <span class="st">"READ"</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">arrptr</span>, <span class="st">"READ"</span><span class="op">)</span></span>
<span><span class="va">subarr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">4L</span>, <span class="fl">1L</span>,<span class="fl">4L</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_subarray</span><span class="op">(</span><span class="va">qryptr</span>, <span class="va">subarr</span><span class="op">)</span></span>
<span><span class="va">vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span>  <span class="co"># reserve (insufficient) space</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_buffer</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"a"</span>, <span class="va">vec</span><span class="op">)</span></span>
<span><span class="va">finished</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span>
<span><span class="kw">while</span> <span class="op">(</span><span class="op">!</span><span class="va">finished</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_submit</span><span class="op">(</span><span class="va">qryptr</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">vec</span><span class="op">)</span></span>
<span>  <span class="va">finished</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_status</span><span class="op">(</span><span class="va">qryptr</span><span class="op">)</span> <span class="op">==</span> <span class="st">"COMPLETE"</span></span>
<span><span class="op">}</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_close</span><span class="op">(</span><span class="va">arrptr</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="result-estimation">Result Estimation<a class="anchor" aria-label="anchor" href="#result-estimation"></a>
</h4>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ...create query object</span></span>
<span></span>
<span><span class="co"># estimated size of a fixed-length attribute in sparse array</span></span>
<span><span class="va">sz</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_get_est_result_size.html">tiledb_query_get_est_result_size</a></span><span class="op">(</span><span class="va">qry</span>, <span class="st">"a"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># estimated size of a variable-length attribute in dense or sparse array</span></span>
<span><span class="va">sz</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_query_get_est_result_size_var.html">tiledb_query_get_est_result_size_var</a></span><span class="op">(</span><span class="va">qry</span>, <span class="st">"b"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="time-traveling">Time Traveling<a class="anchor" aria-label="anchor" href="#time-traveling"></a>
</h4>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># time traveling is currently only accessible via the lower-level API</span></span>
<span><span class="co"># we use the R Datetime type; internally TileDB uses milliseconds since epoch</span></span>
<span><span class="va">tstamp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">60</span><span class="op">*</span><span class="fl">60</span> <span class="co"># one hour ago</span></span>
<span></span>
<span><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_ctx.html">tiledb_ctx</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">arrptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_open_at</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">uridense</span>, <span class="st">"READ"</span>, <span class="va">tstamp</span><span class="op">)</span></span>
<span><span class="va">subarr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">2L</span>, <span class="fl">2L</span>,<span class="fl">4L</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">arrptr</span>, <span class="st">"READ"</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_subarray</span><span class="op">(</span><span class="va">qryptr</span>, <span class="va">subarr</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_layout</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"COL_MAJOR"</span><span class="op">)</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span>  <span class="co"># reserve space</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_set_buffer</span><span class="op">(</span><span class="va">qryptr</span>, <span class="st">"a"</span>, <span class="va">a</span><span class="op">)</span></span>
<span><span class="va">qryptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_query_submit</span><span class="op">(</span><span class="va">qryptr</span><span class="op">)</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_close</span><span class="op">(</span><span class="va">arrptr</span><span class="op">)</span></span>
<span><span class="va">a</span></span>
<span></span>
<span><span class="co"># we can do the same with encrypted arrays</span></span>
<span><span class="va">encryption_key</span> <span class="op">&lt;-</span> <span class="st">"0123456789abcdeF0123456789abcdeF"</span></span>
<span><span class="va">arrptr</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">:::</span><span class="fu">libtiledb_array_open_at_with_key</span><span class="op">(</span><span class="va">ctx</span><span class="op">@</span><span class="va">ptr</span>, <span class="va">uridensewkey</span>, <span class="st">"READ"</span>,</span>
<span>                                                    <span class="va">encryption_key</span>, <span class="va">tstamp</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="embedded-sql">Embedded SQL<a class="anchor" aria-label="anchor" href="#embedded-sql"></a>
</h3>
</div>
<div class="section level3">
<h3 id="asynchronous-queries">Asynchronous Queries<a class="anchor" aria-label="anchor" href="#asynchronous-queries"></a>
</h3>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#  ... create read or write query</span></span>
<span></span>
<span><span class="co"># Instead of using tiledb_query_submit(), use tiledb_query_submit_async()</span></span>
<span><span class="co"># There is an alternate form with a callback function which is not yet supported</span></span>
<span><span class="fu"><a href="../reference/tiledb_query_submit_async.html">tiledb_query_submit_async</a></span><span class="op">(</span><span class="va">qry</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="configuration">Configuration<a class="anchor" aria-label="anchor" href="#configuration"></a>
</h3>
<div class="section level5">
<h5 id="basic-usage">Basic Usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h5>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a configuration object</span></span>
<span><span class="va">config</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_config.html">tiledb_config</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set a configuration parameter</span></span>
<span><span class="va">config</span><span class="op">[</span><span class="st">"sm.tile_cache_size"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"5000"</span></span>
<span></span>
<span><span class="co"># Get a configuration parameter</span></span>
<span><span class="va">tile_cache_size</span> <span class="op">&lt;-</span> <span class="va">config</span><span class="op">[</span><span class="st">"sm.tile_cache_size"</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Unset a configuration parameter</span></span>
<span><span class="fu"><a href="../reference/tiledb_config_unset.html">tiledb_config_unset</a></span><span class="op">(</span><span class="va">config</span>, <span class="st">"sm.tile_cache_size"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="save-and-load-to-file">Save and Load to File<a class="anchor" aria-label="anchor" href="#save-and-load-to-file"></a>
</h5>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Save to file</span></span>
<span><span class="va">config</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_config.html">tiledb_config</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">config</span><span class="op">[</span><span class="st">"sm.tile_cache_size"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span>;</span>
<span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"tiledb_config"</span>, fileext <span class="op">=</span> <span class="st">".txt"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_config_save.html">tiledb_config_save</a></span><span class="op">(</span><span class="va">config</span>, <span class="va">file</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load from file</span></span>
<span><span class="va">config_loaded</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_config_load.html">tiledb_config_load</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span>
<span><span class="va">tile_cache_size</span> <span class="op">=</span> <span class="va">config_loaded</span><span class="op">[</span><span class="st">"sm.tile_cache_size"</span><span class="op">]</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="configuration-iterator">Configuration Iterator<a class="anchor" aria-label="anchor" href="#configuration-iterator"></a>
</h5>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># R has no native iterator but one loop over the config elements</span></span>
<span><span class="co"># by retrieving the configuration as a vector</span></span>
<span></span>
<span><span class="va">cfg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="fu"><a href="../reference/tiledb_config.html">tiledb_config</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print all non-empty config elements</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">n</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">cfg</span><span class="op">)</span><span class="op">)</span></span>
<span>   <span class="kw">if</span> <span class="op">(</span><span class="va">cfg</span><span class="op">[</span><span class="va">n</span><span class="op">]</span> <span class="op">!=</span> <span class="st">""</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">n</span>, <span class="st">":"</span>, <span class="va">cfg</span><span class="op">[</span><span class="va">n</span><span class="op">]</span>, <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="array-metadata">Array Metadata<a class="anchor" aria-label="anchor" href="#array-metadata"></a>
</h3>
<div class="section level5">
<h5 id="writing-array-metadata">Writing Array Metadata<a class="anchor" aria-label="anchor" href="#writing-array-metadata"></a>
</h5>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 'array' can be a URI, or an array opened for writing</span></span>
<span><span class="fu"><a href="../reference/tiledb_put_metadata.html">tiledb_put_metadata</a></span><span class="op">(</span><span class="va">array</span>, <span class="st">"aaa"</span>, <span class="fl">100L</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_put_metadata.html">tiledb_put_metadata</a></span><span class="op">(</span><span class="va">array</span>, <span class="st">"bb"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.1</span>, <span class="fl">2.2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="reading-array-metadata">Reading Array Metadata<a class="anchor" aria-label="anchor" href="#reading-array-metadata"></a>
</h5>
<p>One can read by key:</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 'array' can be a URI, or an array opened for reading</span></span>
<span><span class="fu"><a href="../reference/tiledb_get_metadata.html">tiledb_get_metadata</a></span><span class="op">(</span><span class="va">array</span>, <span class="st">"aaa"</span><span class="op">)</span></span></code></pre></div>
<p>Or one can retrieve all metadata at once:</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 'array' can be a URI, or an array opened for reading</span></span>
<span><span class="va">md</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_get_all_metadata.html">tiledb_get_all_metadata</a></span><span class="op">(</span><span class="va">array</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># prints all keys and (formatted) values</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">md</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="deleting-array-metadata">Deleting Array Metadata<a class="anchor" aria-label="anchor" href="#deleting-array-metadata"></a>
</h5>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 'array' can be a URI, or an array opened for writing</span></span>
<span><span class="fu"><a href="../reference/tiledb_delete_metadata.html">tiledb_delete_metadata</a></span><span class="op">(</span><span class="va">array</span>, <span class="st">"aaa"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="consolidating-and-vacuuming">Consolidating And Vacuuming<a class="anchor" aria-label="anchor" href="#consolidating-and-vacuuming"></a>
</h3>
<div class="section level5">
<h5 id="fragments">Fragments<a class="anchor" aria-label="anchor" href="#fragments"></a>
</h5>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># An array URI</span></span>
<span><span class="va">uri</span> <span class="op">&lt;-</span> <span class="st">"&lt;array_uri&gt;"</span></span>
<span></span>
<span><span class="co"># Consolidate with default configuration</span></span>
<span><span class="fu"><a href="../reference/array_consolidate.html">array_consolidate</a></span><span class="op">(</span><span class="va">uri</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Alteratively, create and pass a configuration object</span></span>
<span><span class="va">cfg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_config.html">tiledb_config</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">cfg</span><span class="op">[</span><span class="st">"sm.consolidation.steps"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"3"</span></span>
<span><span class="va">cfg</span><span class="op">[</span><span class="st">"sm.consolidation.mode"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"fragments"</span></span>
<span><span class="fu"><a href="../reference/array_consolidate.html">array_consolidate</a></span><span class="op">(</span><span class="va">uri</span>, <span class="va">cfg</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="vacuuming">Vacuuming<a class="anchor" aria-label="anchor" href="#vacuuming"></a>
</h5>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># An array URI</span></span>
<span><span class="va">uri</span> <span class="op">&lt;-</span> <span class="st">"&lt;array_uri&gt;"</span></span>
<span></span>
<span><span class="co"># Vacuum with default configuration</span></span>
<span><span class="fu"><a href="../reference/array_vacuum.html">array_vacuum</a></span><span class="op">(</span><span class="va">uri</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Alteratively, create and pass a configuration object</span></span>
<span><span class="va">cfg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_config.html">tiledb_config</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">cfg</span><span class="op">[</span><span class="st">"sm.vacuum.mode"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"fragments"</span></span>
<span><span class="fu"><a href="../reference/array_vacuum.html">array_vacuum</a></span><span class="op">(</span><span class="va">uri</span>, <span class="va">cfg</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="object-management">Object Management<a class="anchor" aria-label="anchor" href="#object-management"></a>
</h3>
<div class="section level5">
<h5 id="creating-tiledb-groups">Creating TileDB Groups<a class="anchor" aria-label="anchor" href="#creating-tiledb-groups"></a>
</h5>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tiledb_group_create.html">tiledb_group_create</a></span><span class="op">(</span><span class="st">"/tmp/my_group"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="getting-the-object-type">Getting the Object Type<a class="anchor" aria-label="anchor" href="#getting-the-object-type"></a>
</h5>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">type</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_object_type.html">tiledb_object_type</a></span><span class="op">(</span><span class="st">"&lt;path&gt;"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="list-the-object-hierarchy">List the Object Hierarchy<a class="anchor" aria-label="anchor" href="#list-the-object-hierarchy"></a>
</h5>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List arrays (defaults to default "PREORDER" traversal)</span></span>
<span><span class="fu"><a href="../reference/tiledb_object_ls.html">tiledb_object_ls</a></span><span class="op">(</span><span class="va">uri</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Walk arrays (with "POSTORDER" traversal) returning a data.frame</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_object_walk.html">tiledb_object_walk</a></span><span class="op">(</span><span class="st">"&lt;uri&gt;"</span>, <span class="st">"POSTORDER"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show the content</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="move-remove-object">Move / Remove Object<a class="anchor" aria-label="anchor" href="#move-remove-object"></a>
</h5>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tiledb_object_mv.html">tiledb_object_mv</a></span><span class="op">(</span><span class="st">"/tmp/my_group"</span>, <span class="st">"/tmp/my_group_2"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">tiledb_object_remove</span><span class="op">(</span><span class="va">ctx</span>, <span class="st">"/tmp/my_group_2/dense_array"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="virtual-filesystem">Virtual Filesystem<a class="anchor" aria-label="anchor" href="#virtual-filesystem"></a>
</h3>
<div class="section level5">
<h5 id="writing">Writing<a class="anchor" aria-label="anchor" href="#writing"></a>
</h5>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># binary file to be written</span></span>
<span><span class="va">uri</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"tiledb_vfs"</span>, fileext <span class="op">=</span> <span class="st">".bin"</span><span class="op">)</span></span>
<span><span class="co"># open file</span></span>
<span><span class="va">fhbuf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_vfs_open.html">tiledb_vfs_open</a></span><span class="op">(</span><span class="va">uri</span>, <span class="st">"WRITE"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a binary payload from a serialized R object</span></span>
<span><span class="va">payload</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/serialize.html" class="external-link">serialize</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>dbl<span class="op">=</span><span class="fl">153</span>, string<span class="op">=</span><span class="st">"abcde"</span><span class="op">)</span>, <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># write it and close file</span></span>
<span><span class="fu"><a href="../reference/tiledb_vfs_write.html">tiledb_vfs_write</a></span><span class="op">(</span><span class="va">fhbuf</span>, <span class="va">payload</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_vfs_close.html">tiledb_vfs_close</a></span><span class="op">(</span><span class="va">fhbuf</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># write again overwriting previous write</span></span>
<span><span class="va">fhbuf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_vfs_open.html">tiledb_vfs_open</a></span><span class="op">(</span><span class="va">uri</span>, <span class="st">"WRITE"</span><span class="op">)</span></span>
<span><span class="va">payload</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/serialize.html" class="external-link">serialize</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>dbl<span class="op">=</span><span class="fl">153.1</span>, string<span class="op">=</span><span class="st">"abcdef"</span><span class="op">)</span>, <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_vfs_write.html">tiledb_vfs_write</a></span><span class="op">(</span><span class="va">fhbuf</span>, <span class="va">payload</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_vfs_close.html">tiledb_vfs_close</a></span><span class="op">(</span><span class="va">fhbuf</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># append to existing file</span></span>
<span><span class="va">fhbuf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_vfs_open.html">tiledb_vfs_open</a></span><span class="op">(</span><span class="va">uri</span>, <span class="st">"APPEND"</span><span class="op">)</span></span>
<span><span class="va">payload</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/serialize.html" class="external-link">serialize</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>string<span class="op">=</span><span class="st">"ghijkl"</span><span class="op">)</span>, <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_vfs_write.html">tiledb_vfs_write</a></span><span class="op">(</span><span class="va">fhbuf</span>, <span class="va">payload</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_vfs_close.html">tiledb_vfs_close</a></span><span class="op">(</span><span class="va">fhbuf</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="reading">Reading<a class="anchor" aria-label="anchor" href="#reading"></a>
</h5>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># open a binary file for reading</span></span>
<span><span class="va">fhbuf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_vfs_open.html">tiledb_vfs_open</a></span><span class="op">(</span><span class="va">uri</span>, <span class="st">"READ"</span><span class="op">)</span></span>
<span><span class="va">vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_vfs_read.html">tiledb_vfs_read</a></span><span class="op">(</span><span class="va">fhbuf</span>, <span class="fu">as.integer64</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>, <span class="fu">as.integer64</span><span class="op">(</span><span class="fl">488</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_vfs_close.html">tiledb_vfs_close</a></span><span class="op">(</span><span class="va">fhbuf</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="managing">Managing<a class="anchor" aria-label="anchor" href="#managing"></a>
</h5>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Creating a directory</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="../reference/tiledb_vfs_is_dir.html">tiledb_vfs_is_dir</a></span><span class="op">(</span><span class="st">"dir_A"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/tiledb_vfs_create_dir.html">tiledb_vfs_create_dir</a></span><span class="op">(</span><span class="st">"dir_A"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Created 'dir_A'\n"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"'dir_A' already exists\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Creating an (empty) file</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="../reference/tiledb_vfs_is_file.html">tiledb_vfs_is_file</a></span><span class="op">(</span><span class="st">"dir_A/file_A"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/tiledb_vfs_touch.html">tiledb_vfs_touch</a></span><span class="op">(</span><span class="st">"dir_A/file_A"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Created empty file 'dir_A/file_A'\n"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"File 'dir_A/file_A' already existed\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Getting the file size</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Size of file 'dir_A/file_A': "</span>,</span>
<span>    <span class="fu"><a href="../reference/tiledb_vfs_file_size.html">tiledb_vfs_file_size</a></span><span class="op">(</span><span class="st">"dir_A/file_A"</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Moving files (moving directories is similar)</span></span>
<span><span class="fu"><a href="../reference/tiledb_vfs_move_file.html">tiledb_vfs_move_file</a></span><span class="op">(</span><span class="st">"dir_A/file_A"</span>, <span class="st">"dir_A/file_B"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Cleaning up</span></span>
<span><span class="fu"><a href="../reference/tiledb_vfs_remove_file.html">tiledb_vfs_remove_file</a></span><span class="op">(</span><span class="st">"dir_A/file_B"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tiledb_vfs_remove_dir.html">tiledb_vfs_remove_dir</a></span><span class="op">(</span><span class="st">"dir_A"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="s3">S3<a class="anchor" aria-label="anchor" href="#s3"></a>
</h5>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tiledb_vfs_create_bucket.html">tiledb_vfs_create_bucket</a></span><span class="op">(</span><span class="st">"s3://my_bucket"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/tiledb_vfs_remove_bucket.html">tiledb_vfs_remove_bucket</a></span><span class="op">(</span><span class="st">"s3://my_bucket"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="configuring-vfs">Configuring VFS<a class="anchor" aria-label="anchor" href="#configuring-vfs"></a>
</h5>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_get_context.html">tiledb_get_context</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">config</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_config.html">tiledb_config</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">config</span><span class="op">[</span><span class="st">"vfs.file.max_parallel_ops"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">16</span></span>
<span></span>
<span><span class="va">vfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tiledb_vfs.html">tiledb_vfs</a></span><span class="op">(</span><span class="va">config</span>, <span class="va">ctx</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or create the Config first and pass to the Ctx constructor</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="using-performance-statistics">Using Performance Statistics<a class="anchor" aria-label="anchor" href="#using-performance-statistics"></a>
</h3>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Start collecting statistics</span></span>
<span><span class="fu"><a href="../reference/tiledb_stats_enable.html">tiledb_stats_enable</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ... create some query here</span></span>
<span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="va">A</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Stop collecting statistics</span></span>
<span><span class="fu"><a href="../reference/tiledb_stats_disable.html">tiledb_stats_disable</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show the statistics on the console</span></span>
<span><span class="fu"><a href="../reference/tiledb_stats_print.html">tiledb_stats_print</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Save the statistics to a file</span></span>
<span><span class="fu"><a href="../reference/tiledb_stats_dump.html">tiledb_stats_dump</a></span><span class="op">(</span><span class="st">"my_file_name"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># You can also reset the stats as follows</span></span>
<span><span class="fu"><a href="../reference/tiledb_stats_reset.html">tiledb_stats_reset</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="catching-errors">Catching Errors<a class="anchor" aria-label="anchor" href="#catching-errors"></a>
</h3>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="co"># Create a group. The code below creates a group `my_group` and prints a</span></span>
<span>    <span class="co"># message because (normally) it will succeed.</span></span>
<span>    <span class="fu"><a href="../reference/tiledb_group_create.html">tiledb_group_create</a></span><span class="op">(</span><span class="st">"/tmp/my_group"</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Create the same group again. If we attempt to create the same group</span></span>
<span>    <span class="co"># `my_group` as shown below, TileDB will return an error.</span></span>
<span>    <span class="fu"><a href="../reference/tiledb_group_create.html">tiledb_group_create</a></span><span class="op">(</span><span class="st">"/tmp.my_group"</span><span class="op">)</span></span>
<span><span class="op">}</span>, warning <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">w</span><span class="op">)</span> <span class="op">{</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">w</span><span class="op">)</span></span>
<span><span class="op">}</span>, error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">e</span><span class="op">)</span></span>
<span><span class="op">}</span>, finally <span class="op">=</span> <span class="op">{</span><span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://tiledb.com" class="external-link"><img src="https://github.com/TileDB-Inc/TileDB/raw/dev/doc/source/_static/tiledb-logo_color_no_margin_@4x.png" height="24"></a>, Dirk Eddelbuettel, Isaiah Norton.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
