<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>First Steps with TileDB • tiledb</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="First Steps with TileDB">
<meta property="og:description" content="tiledb">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tiledb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction.html">First Steps with TileDB</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/TileDB-Inc/TileDB-R/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="introduction_files/header-attrs-2.2/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>First Steps with TileDB</h1>
                        <h4 class="author">TileDB Inc.</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/TileDB-Inc/TileDB-R/blob/master/vignettes/introduction.Rmd"><code>vignettes/introduction.Rmd</code></a></small>
      <div class="hidden name"><code>introduction.Rmd</code></div>

    </div>

    
        <div class="abstract">
      <p class="abstract">Abstract</p>
      <p>This vignette describe first steps with TileDB such as reading and writing of sparse and dense arrays.</p>
    </div>
    
<div id="getting-started" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h1>
<p>Once the TileDB R package is installed, it can be loaded via <code><a href="https://rdrr.io/pkg/tiledb/man">library(tiledb)</a></code>. Installation is supported on Linux and macOS.</p>
<p>Documentation for the TileDB R package is available via the <code>help()</code> function from within R as well as via the <a href="https://tiledb-inc.github.io/TileDB-R/">package documentation</a> and an <a href="https://tiledb-inc.github.io/TileDB-R/documentation.nb.html">introductory notebook</a>. Documentation about TileDB itself is <a href="https://docs.tiledb.com/main/">also available</a>.</p>
<p>Several “quickstart” examples that are discussed on the website are available in the <a href="https://github.com/TileDB-Inc/TileDB-R/blob/master/inst/examples/">examples</a> directory. This vignette discusses similar examples.</p>
<p>In the following examples, the URIs describing arrays point to local file system object. When TileDB has been built with S3 support, and with proper AWS credentials in the usual environment variables, URIs such as <code>s3://some/data/bucket</code> can be used where a local file would be used. See the script <a href="https://github.com/TileDB-Inc/TileDB-R/blob/master/inst/examples/ex_S3.R">examples/ex_S3.R</a> for an example.</p>
</div>
<div id="dense-arrays" class="section level1">
<h1 class="hasAnchor">
<a href="#dense-arrays" class="anchor"></a>Dense Arrays</h1>
<div id="basic-reading-of-dense-arrays" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-reading-of-dense-arrays" class="anchor"></a>Basic Reading of Dense Arrays</h2>
<p>We can consider the file <a href="../inst/ex_1.R"><code>ex_1.R</code></a> in the examples directory. It is a simple yet complete example extending <code>quickstart_dense.R</code> by adding a second attribute.</p>
<p><em>Read 1-D</em></p>
<p>Extracts column 2 and rows 1 to 2 from A, returning a list object as there are multiple attributes.</p>
<pre><code>R&gt; A[1:2, 2]
$a
     [,1]
[1,]   11
[2,]   12

$b
     [,1]
[1,]  111
[2,]  112

$c
     [,1]
[1,] "k"
[2,] "l"</code></pre>
<p>Subset the returned list via <code>[[var]]</code> or <code>$var</code>. Numeric index also works.</p>
<pre><code>R&gt; A[1:2, 2][["a"]]
     [,1]
[1,]   11
[2,]   12
R&gt; A[1:2, 2]$a
     [,1]
[1,]   11
[2,]   12</code></pre>
<p>The two-dimensional indexing retains a matrix structure, but this can be overridden by setting <code>drop=TRUE</code> which works for either example.</p>
<pre><code>R&gt; A[1:2, 2, drop=TRUE]$a
[1] 11 12
R&gt;</code></pre>
<p>The result is now a vector of the attribute type.</p>
<p><em>Read 2-D</em></p>
<p>This works analogously. But not selecting an attribute we now get a list of matrices.</p>
<pre><code>R&gt; A[6:9, 3:4]
$a
     [,1] [,2]
[1,]   26   36
[2,]   27   37
[3,]   28   38
[4,]   29   39

$b
     [,1] [,2]
[1,]  126  136
[2,]  127  137
[3,]  128  138
[4,]  129  139

$c
     [,1]    [,2]
[1,] "z"     "H"
[2,] "brown" "I"
[3,] "fox"   "J"
[4,] "A"     "K"</code></pre>
</div>
<div id="read-2-d-with-attribute-selection" class="section level2">
<h2 class="hasAnchor">
<a href="#read-2-d-with-attribute-selection" class="anchor"></a>Read 2-D with attribute selection</h2>
<p>We can restrict the selection to a subset of attributes when opening the array.</p>
<pre><code>R&gt; A &lt;- tiledb_dense(uri = uri, attrs = c("b","c"))
R&gt; A[6:9, 2:4]
$b
     [,1] [,2] [,3]
[1,]  116  126  136
[2,]  117  127  137
[3,]  118  128  138
[4,]  119  129  139

$c
     [,1]    [,2] [,3]
[1,] "p"  "z"     "H"
[2,] "q"  "brown" "I"
[3,] "r"  "fox"   "J"
[4,] "s"  "A"     "K"</code></pre>
<p>We can also ask for data.frame objects by setting <code>as.data.frame=TRUE</code> when opening the array.</p>
<pre><code>R&gt; A[6:9, 3:4]
   a   b     c
1 26 126     z
2 27 127 brown
3 28 128   fox
4 29 129     A
5 36 136     H
6 37 137     I
7 38 138     J
8 39 139     K</code></pre>
<p>This scheme can be generalized to variable cells, or cells where N&gt;1, as we can expand each (atomistic) value over corresponding row and column indices.</p>
<p>The column types correspond to the attribute typed in the array schema, subject to the constraint mentioned above on R types. (The char comes in as a factor variable as is still the R 3.6.* default which is about to change. We can also override, users can too.)</p>
<pre><code>R&gt; sapply(A[6:9, 3:4], "class")
        a         b         c      rows      cols
"integer" "numeric"  "factor" "integer" "integer"</code></pre>
<p>Consistent with the <code>data.frame</code> semantics, <em>now</em> requesting a named column <em>reduces to a vector</em> as this happens at the R side:</p>
<pre><code>R&gt; A[1:3, 2:5]$b
[1] 111 112 113 121 122 123 131 132 133 141 142 143</code></pre>
<p>The attribute selection works with <code>as.data.frame=TRUE</code> as well:</p>
<pre><code>R&gt; A &lt;- tiledb_dense(uri = uri, as.data.frame = TRUE, attrs = c("b","c"))
R&gt; A[6:9, 2:4]
     b     c
1  116     p
2  117     q
3  118     r
4  119     s
5  126     z
6  127 brown
7  128   fox
8  129     A
9  136     H
10 137     I
11 138     J
12 139     K</code></pre>
</div>
</div>
<div id="sparse-arrays" class="section level1">
<h1 class="hasAnchor">
<a href="#sparse-arrays" class="anchor"></a>Sparse Arrays</h1>
<div id="basic-reading-and-writing-of-sparse-arrays" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-reading-and-writing-of-sparse-arrays" class="anchor"></a>Basic Reading and Writing of Sparse Arrays</h2>
<p><em>Simple Examples</em></p>
<p>Basic reading returns the coordinates and any attributes. The following examples use the array created by the <a href="https://github.com/TileDB-Inc/TileDB/blob/dev/examples/cpp_api/quickstart_sparse.cc">quickstart_sparse</a> example.</p>
<pre><code>R&gt; A &lt;- tiledb_sparse(uri = uri)
R&gt; A[]
$coords
[1] 1 1 2 3 2 4

$a
[1] 1 3 2</code></pre>
<p>We can also request a data.frame object, either when opening or by changing this object characteric on the fly:</p>
<pre><code>R&gt; return.data.frame(A) &lt;- TRUE
R&gt; A[]
  a rows cols
1 1    1    1
2 3    2    3
3 2    2    4</code></pre>
<p>For sparse arrays, the return type is by default ‘extended’ showing rows and column but this can overridden.</p>
<p>Assignment works similarly:</p>
<pre><code>R&gt; A[4,2] &lt;- 42L
R&gt; A[]
   a rows cols
1  1    1    1
2 42    4    2
3  3    2    3
4  2    2    4</code></pre>
<p>Reads can select rows and or colums:</p>
<pre><code>R&gt; A[2,]
  a rows cols
1 3    2    3
2 2    2    4
R&gt; A[,2]
   a rows cols
1 42    4    2</code></pre>
<p>Attributes can be selected similarly.</p>
</div>
<div id="datetime-attributes" class="section level2">
<h2 class="hasAnchor">
<a href="#datetime-attributes" class="anchor"></a>Date(time) Attributes</h2>
<p>Similar to the dense array case described earlier, the file <a href="../inst/examples/ex_2.R"><code>ex_2.R</code></a> illustrates some basic operations on sparse arrays. It also shows date and datetime types instead of just integer and double precision floats.</p>
<pre><code>R&gt; A &lt;- tiledb_sparse(uri = uri, as.data.frame = TRUE)
R&gt; A[1577858580:1577858700]   # POSIX time seconds
  a   b          d                          e       rows
1 3 103 2020-01-11 2020-01-02 18:24:33.844293 1577858580
2 4 104 2020-01-15 2020-01-05 02:28:36.215681 1577858640
3 5 105 2020-01-19 2020-01-05 00:44:04.805775 1577858700</code></pre>
<p>The row coordinate is currently a floating point representation of the underlying time type. We can both select attributes (here we excluded the “a” column) and select rows by time (as the time stampt get converted to the required floating point value).</p>
<pre><code>R&gt; attrs(A) &lt;- c("b", "d", "e")
R&gt; A[as.POSIXct("2020-01-01 00:01:00"):as.POSIXct("2020-01-01 00:03:00")]
    b          d                          e       rows
1 101 2020-01-05 2020-01-01 03:03:07.548390 1577858460
2 102 2020-01-10 2020-01-02 21:02:19.748134 1577858520
3 103 2020-01-11 2020-01-02 18:24:33.844293 1577858580</code></pre>
<p>More extended examples are available showing indexing by date(time) as well as character dimension.</p>
</div>
</div>
<div id="additional-information" class="section level1">
<h1 class="hasAnchor">
<a href="#additional-information" class="anchor"></a>Additional Information</h1>
<p>The TileDB R package is documented via R help functions (<em>e.g.</em> <code><a href="../reference/tiledb_sparse.html">help("tiledb_sparse")</a></code> shows information for the <code><a href="../reference/tiledb_sparse.html">tiledb_sparse()</a></code> function) as well as via a <a href="https://tiledb-inc.github.io/TileDB-R/">website regrouping all documentation</a>. An extended <a href="https://tiledb-inc.github.io/TileDB-R/documentation.nb.html">notebook</a> is available, as are a numb <a href="https://github.com/TileDB-Inc/TileDB-R/tree/master/inst/examples">examples/</a> directory.</p>
<p>TileDB itself has extensive <a href="https://docs.tiledb.com/developer/installation">installation</a>, <a href="https://docs.tiledb.com/developer/quickstart">quickstart</a>, and <a href="https://docs.tiledb.com/developer/">overall documentation</a> as well as a <a href="https://forum.tiledb.com/">support forum</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Dirk Eddelbuettel.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
